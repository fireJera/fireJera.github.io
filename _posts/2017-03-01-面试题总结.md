===
æœ€é«˜é˜¶æ ‡é¢˜
===

---
title: The interview questions summary
description: This is an introduction to summary of interview questions
#header: é¢è¯•é¢˜æ€»ç»“
---

å·¥ä½œä¸¤å¹´å¤šï¼Œä¾ç„¶å¯¹é¢è¯•ä¸­çš„æŠ€æœ¯æ„Ÿåˆ°æ‰‹è¶³æ— æŽªï¼Œä»Žå¤§å­¦åŽä¸€ç›´çŽ©ç‰©ä¸§å¿—ï¼Œæ‰€ä»¥æŽ¥ä¸‹æ¥ä»Žé¢è¯•é¢˜ä¸­å­¦ä¹ æ¥å¼¥è¡¥ä¹‹å‰çš„å •è½ã€‚è¿™ç¯‡æ–‡ç« å°†è¦å†™å¾ˆé•¿ã€‚

1. MVCè®¾è®¡æ¨¡å¼ï¼š

Mï¼šmodelæ•°æ®æºï¼š è´Ÿè´£å­˜å‚¨ï¼Œå®šä¹‰ï¼Œæ“ä½œæ•°æ®
Vï¼šviewå±•ç¤ºç»™ç”¨æˆ·çœ‹ï¼Œè´Ÿè´£ä¸Žç”¨æˆ·çš„äº¤äº’
Cï¼šcontrollerå¯ä»¥å’Œmå’Œvç›´æŽ¥é€šä¿¡ï¼Œvè¦é€šè¿‡ä»£ç†æ¥å’Œcé€šä¿¡ï¼Œmé€šè¿‡kvoæˆ–nsnotificationå’Œcé€šä¿¡ï¼Œmå’Œvä¸èƒ½ç›´æŽ¥é€šä¿¡ã€‚cè´Ÿè´£å°†mçš„æ•°æ®äº¤ç»™vä½¿ç”¨ã€‚

2. å¾ªçŽ¯å¼•ç”¨ã€‚

![retain_cycle_1](https://Jeremy1221.github.io/img/retain_cycle/retain_cycle_1.png)

æˆ‘çš„ç†è§£ï¼šå¯¹è±¡Aå’ŒBäº’ç›¸æŒæœ‰ï¼Œå½“æˆ‘ä»¬æƒ³è¦é”€æ¯Aæ—¶ï¼Œå› ä¸ºAæŒæœ‰Bï¼Œç„¶åŽæˆ‘ä»¬å›žåŽ»å°è¯•é”€æ¯Bï¼Œæ­¤æ—¶æˆ‘ä»¬å‘çŽ°BåˆæŒæœ‰Aï¼Œç„¶åŽæˆ‘ä»¬æœ‰å°è¯•åŽ»é”€æ¯Bã€‚å¦‚æ­¤å¾ªçŽ¯ä¸‹æ¥æˆ‘ä»¬å°±æ²¡æ³•é”€æ¯ä»»ä½•ä¸€ä¸ªã€‚

![retain_cycle_2](https://Jeremy1221.github.io/img/retain_cycle/retain_cycle_2.png)

å¦‚æžœå¤šä¸ªå¯¹è±¡ä¹‹é—´å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œå¯¹è±¡è¶Šå¤šï¼ŒçŽ¯è¶Šå¤§ï¼Œå°±è¶Šéš¾å‘çŽ°è¿™ä¸ªé—®é¢˜ã€‚


3. çº¿ç¨‹ä¸Žè¿›ç¨‹

ä¸€ä¸ªç¨‹åºåªæœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ã€‚
è¿›ç¨‹èµ„æºåˆ†é…çš„æœ€å°ç‹¬ç«‹å•å…ƒ
ä¸€ä¸ªçº¿ç¨‹æ­»äº†ï¼Œè¿™ä¸ªè¿›ç¨‹å°±æ­»äº†ï¼Œä½†æ˜¯è¿›ç¨‹é—´æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºè¿›ç¨‹æœ‰è‡ªå·±çš„ç‹¬ç«‹åœ°å€ç©ºé—´ï¼Œæ‰€ä»¥è¿›ç¨‹æ¯”è¾ƒå®‰å…¨ï¼Œä½†æ˜¯è¿›ç¨‹é—´åˆ‡æ¢æ¶ˆè€—èµ„æºå¤§ï¼Œæ•ˆçŽ‡å·®ã€‚
è¦æ±‚åŒæ—¶è¿›è¡Œå¹¶ä¸”å…±äº«èµ„æºçš„æ—¶å€™åªèƒ½ç”¨çº¿ç¨‹ï¼Œä¸èƒ½ç”¨è¿›ç¨‹ã€‚

4. LayoutSubViewsåœ¨ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨ï¼Ÿ

å½“Viewæœ¬èº«çš„frameæ”¹å˜æ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚

5. loadView

controllerçš„viewä¸ºnilæ—¶ä¼šè°ƒç”¨ï¼ŒviewDidLoadåœ¨viewä»Žnibæ–‡ä»¶åˆå§‹åŒ–æ—¶è°ƒç”¨

6. __blockå’Œ__weak

7. å †å’Œæ ˆ

æ ˆåŒºæ˜¯ç”±ç³»ç»Ÿè‡ªè¡Œç®¡ç†çš„ï¼Œå †æ˜¯ç¨‹åºå‘˜æ¥ç®¡ç†çš„
æ ˆæ˜¯è¿žç»­çš„ï¼Œå †æ˜¯ä¸è¿žç»­çš„æ‰€ä»¥ä¼šäº§ç”Ÿç¢Žç‰‡
å †æ˜¯åŠ¨æ€åˆ†é…ï¼Œæ ˆæ˜¯åŠ¨æ€å’Œé™æ€åˆ†é…çš„
æ ˆçš„åˆ†é…æ•ˆçŽ‡æ¯”å †é«˜

8. xmlè§£æž

domå’Œsax domå¤„ç†è§„æ¨¡è¾ƒå¤§çš„æ–‡æ¡£æ˜¯å¾ˆè€—å†…å­˜å ç”¨èµ„æºæ¯”è¾ƒå¤š

9. _objc_msgForwardå‡½æ•°æ˜¯åšä»€ä¹ˆçš„ï¼Œç›´æŽ¥è°ƒç”¨å®ƒå°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ
10. http://www.cocoachina.com/ios/20150825/13195.html
11.  èƒ½å¦å‘ç¼–è¯‘åŽå¾—åˆ°çš„ç±»ä¸­å¢žåŠ å®žä¾‹å˜é‡ï¼Ÿèƒ½å¦å‘è¿è¡Œæ—¶åˆ›å»ºçš„ç±»ä¸­æ·»åŠ å®žä¾‹å˜é‡ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
12.  applicationWillEnterForegroundå’ŒapplicationDidBecomeActiveéƒ½ä¼šåœ¨å“ªäº›åœºæ™¯ä¸‹è¢«è°ƒç”¨ï¼Ÿä¸¾ä¾‹è¶Šå¤šè¶Šå¥½ã€‚
13.  å¦‚ä½•ç»ˆæ­¢æ­£åœ¨è¿è¡Œçš„å·¥ä½œçº¿ç¨‹ï¼Ÿ
14.  instrument
15.  èŠä¸‹HTTP postçš„bodyä½“ä½¿ç”¨form-urlencodedå’Œmultipart/form-dataçš„åŒºåˆ«ã€‚
16.  è°ˆä¸‹Objective Céƒ½æœ‰å“ªäº›é”æœºåˆ¶ï¼Œä½ ä¸€èˆ¬ç”¨å“ªä¸ªï¼Ÿ
17.  ä»‹ç»ä¸‹iOSè®¾å¤‡èŽ·å–å”¯ä¸€è®¾å¤‡å·çš„åŽ†å²å˜è¿ã€‚
18.  iOSä¸‹å¦‚ä½•å®žçŽ°æŒ‡å®šçº¿ç¨‹æ•°ç›®çš„çº¿ç¨‹æ± ï¼Ÿ
19.  æ•°æ®åº“å»ºè¡¨çš„æ—¶å€™ç´¢å¼•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ
20.  å¦‚ä½•ç”¨HTTPå®žçŽ°é•¿è¿žæŽ¥ï¼Ÿ
21.  è§£é‡Šä¸‹tcpçš„æ…¢å¯åŠ¨ç‰¹æ€§ã€‚
22.  å¦‚ä½•è‡ªå·±é«˜æ•ˆå®žçŽ°NSUserDefault?
23.  NSStringå¦‚ä½•è®¡ç®—å­—ç¬¦çš„ä¸ªæ•°ï¼Ÿ
24.  PKIä½“ç³»å½“ä¸­åŠ å¯†å’Œç­¾åæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

çœ‹åˆ°è¿™ä¸ªé¢˜ç›®æ˜¯ä¸€ä¸ªç¾¤é‡Œçš„æœ‹å‹å‘çš„ï¼Œæ„Ÿè°¢é‚£ä¸ªå…„å¼Ÿï¼Œçœ‹åˆ°MrPeakå¤§å¤§å‡ºçš„é¢˜ç›®å•Š å¥½å¼€å¿ƒï¼Œè¯•ç€ç­”ï¼Œå„ä½å¤§å¤§è¯·è½»å–·ï¼Œåˆšå¥½ä¸æ€Žä¹ˆå¿™ï¼Œå¸¦ç€è€³æœºå¬æ­Œï¼Œç­”äº†ä¸€ä¸ªå°æ—¶ï¼ŒçœŸèˆ’æœå•Šï¼Œçœ‹åˆ°è¿™äº›é¢˜ç›®å¥½å¤šéƒ½ä¸æ€Žä¹ˆçŸ¥é“ï¼Œæ¶è¡¥ï¼Œå­¦ä¹ ã€‚

1.NSStringå¦‚ä½•è®¡ç®—å­—ç¬¦çš„ä¸ªæ•°ï¼Ÿ

åº”è¯¥æ˜¯ç”¨countElementsçš„å‡½æ•°æ¥ç»Ÿè®¡å­—ç¬¦ä¸²æ‰€åŒ…å«çš„å­—ç¬¦ä¸ªæ•°ï¼ŒæŠŠå‚æ•°ä¸ºè¦ç»Ÿè®¡çš„å­—ç¬¦ä¸²å°±å¥½äº†ã€‚

ä½†æ˜¯éœ€è¦æ³¨æ„ä»¥ä¸‹çš„å‡ ä¸ªç‚¹ï¼š

1.å› ä¸ºä¸åŒçš„Unicodeå­—ç¬¦ï¼ŒåŒæ ·çš„å­—ç¬¦ä¸åŒçš„ç¼–ç éƒ½å¯èƒ½å¯¼è‡´å ç”¨ä¸åŒçš„å†…å­˜ã€‚æ‰€ä»¥æŒ‰æ­£å¸¸æ¥è¯´ï¼Œå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¼šå ç”¨ä¸åŒçš„å†…å­˜ã€‚å› æ­¤ï¼Œåªèƒ½é€šè¿‡éåŽ†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦æ¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ä½†æ˜¯å½“åœ¨å¤„ç†ä¸€ä¸ªç‰¹åˆ«é•¿çš„å­—ç¬¦ä¸²çš„è¯ï¼Œå¯ä»¥é€šè¿‡éåŽ†éåŽ†æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™æ ·æ—¢å¯ä»¥ç®—å‡ºå­—ç¬¦ä¸²çš„é•¿åº¦äº†ã€‚

2.åŒä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒcountElementsè®¡ç®—å‡ºæ¥çš„å­—ç¬¦ä¸ªæ•°ä¸ŽNSStringçš„lengthè®¡ç®—å‡ºæ¥çš„é•¿åº¦ä¹Ÿä¸ä¸€å®šæ€»æ˜¯ä¸€æ ·çš„çš„ã€‚å› ä¸ºNSStringçš„é•¿åº¦æ˜¯åŸºUTF-16ç¼–ç çš„ç¼–ç æ¥è®¡ç®—çš„ï¼Œè€Œä¸æ˜¯Unicodeç¼–ç çš„ä¸ªæ•°ã€‚ä½†æ˜¯ï¼Œå¥½åƒåœ¨Swiftä¸­å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²çš„utf16countå±žæ€§æ¥æ¥èŽ·å¾—åŽŸæ¥NSStringçš„lengthå€¼ï¼Œå¿˜è®°äº†ï¼Œå¾ˆä¹…æ²¡ç”¨Swiftäº†ã€‚

2.PKIä½“ç³»å½“ä¸­åŠ å¯†å’Œç­¾åæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

è¿™ä¸ªé—®é¢˜æˆ‘æ¥ç­”çš„è¯ï¼Œåº”è¯¥å…ˆè¯´è¯´PKIæ˜¯ä¸€ç§å®‰å…¨æŠ€æœ¯, æ•°å­—ç­¾åå’ŒåŠ å¯†åŸºæœ¬åŽŸç†æ˜¯ä»€ä¹ˆï¼Œåœ¨è¯´åŒºåˆ«ï¼Œè¯è¯´åŸºæœ¬åŽŸç†æˆ‘ä¹Ÿä¸è®°å¾—äº†ï¼Œå°±å¤§æ¦‚è®°å¾—ä¸€ä¸ªHUSHå‡½æ•°ä»€ä¹ˆçš„äº†ï¼Œä»–ä»¬çš„è¿‡ç¨‹éƒ½æ˜¯ä½¿ç”¨å…¬å¼€å¯†é’¥ä½“ç³»ï¼Œä½†å®žçŽ°çš„è¿‡ç¨‹æ˜¯ä¸åŒçš„ï¼Œç›¸åï¼Œä½¿ç”¨çš„å¯†é’¥å¯¹ä¹Ÿä¸åŒã€‚

1.æ•°å­—ç­¾åæ˜¯å‘é€æ–¹çš„å¯†é’¥å¯¹ï¼Œå‘é€æ–¹ç”¨è‡ªå·±çš„ç§æœ‰å¯†é’¥è¿›è¡ŒåŠ å¯†ï¼ŒæŽ¥æ”¶æ–¹ç”¨å‘é€æ–¹çš„å…¬å¼€å¯†é’¥è¿›è¡Œè§£å¯†ï¼Œå¤§è‡´å°±æ˜¯è¿™æ ·å§ï¼Œå®ƒä¸€ä¸ªä¸€å¯¹å¤šçš„å…³ç³»ï¼Œä»»ä½•æ‹¥æœ‰å‘é€æ–¹å…¬å¼€å¯†é’¥çš„äººéƒ½å¯ä»¥éªŒè¯æ•°å­—ç­¾åçš„æ­£ç¡®æ€§ï¼Œè¿˜æœ‰åªé‡‡ç”¨äº†éžå¯¹ç§°å¯†é’¥åŠ å¯†ç®—æ³•,èƒ½ä¿è¯å‘é€ä¿¡æ¯çš„å®Œæ•´æ€§ã€èº«ä»½è®¤è¯å’Œä¸å¯å¦è®¤æ€§ã€‚

2.æ•°å­—åŠ å¯†æ˜¯æŽ¥æ”¶æ–¹çš„å¯†é’¥å¯¹ï¼Œè¿™æ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œä»»ä½•çŸ¥é“æŽ¥æ”¶æ–¹å…¬å¼€å¯†é’¥çš„äººéƒ½å¯ä»¥å‘æŽ¥æ”¶æ–¹å‘é€åŠ å¯†ä¿¡æ¯ï¼Œåªæœ‰å”¯ä¸€æ‹¥æœ‰æŽ¥æ”¶æ–¹ç§æœ‰å¯†é’¥çš„äººæ‰èƒ½å¯¹ä¿¡æ¯è§£å¯†,ç”¨çš„å¯¹ç§°å¯†é’¥åŠ å¯†ç®—æ³•å’Œéžå¯¹ç§°å¯†é’¥åŠ å¯†ç®—æ³•ç›¸ç»“åˆçš„æ–¹æ³•ï¼Œå®ƒèƒ½ä¿è¯å‘é€ä¿¡æ¯ä¿å¯†æ€§ã€‚

3.å¦‚ä½•è‡ªå·±é«˜æ•ˆå®žçŽ°NSUserDefault?

è¿™ä¸ªï¼ŒçœŸå¿ƒä¸çŸ¥é“ï¼Œpeakå¤§å¤§ã€‚åªçŸ¥é“NSUserDefaultsæ˜¯å®šæ—¶æŠŠç¼“å­˜ä¸­çš„æ•°æ®å†™å…¥ç£ç›˜çš„ï¼Œè€Œä¸æ˜¯å³æ—¶å†™å…¥ï¼Œä¸ºäº†é˜²æ­¢åœ¨å†™å®ŒNSUserDefaultsåŽç¨‹åºé€€å‡ºå¯¼è‡´çš„æ•°æ®ä¸¢å¤±ï¼Œå¯ä»¥åœ¨å†™å…¥æ•°æ®åŽä½¿ç”¨synchronizeå¼ºåˆ¶ç«‹å³å°†æ•°æ®å†™å…¥ç£ç›˜ï¼ŒçŽ°åœ¨è¦é«˜æ•ˆçš„å®žçŽ°NSUserDefaultsï¼Œä¸ªäººè§è§£å°±æ˜¯ä¸é¢‘ç¹çš„ä½¿ç”¨synchornizeï¼Œè‡ªå®šä¹‰ä¸€ä¸ªç±»ï¼Œå†å­˜å–æ—¶é€šè¿‡NSDataåšè½½ä½“ã€‚

4.è§£é‡Šä¸‹tcpçš„æ…¢å¯åŠ¨ç‰¹æ€§ã€‚

çŽ°åœ¨å…¬å¸åº”è¯¥éƒ½æ˜¯åœ¨é¿å…æ…¢å¯åŠ¨ï¼Œåšæ€§èƒ½ä¼˜åŒ–å§ï¼Œä¼˜åŒ–åº”è¯¥å¯ä»¥å°½é‡æŠŠå¤§é‡å°æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªTCPè¿žæŽ¥ä¸­æŽ’é˜Ÿä¼ è¾“å§ï¼Œæ²¡è¯•éªŒè¿‡ï¼Œè‡ªå·±YYçš„ã€‚

è¿™é—®çš„æ˜¯Tcpæ…¢å¯åŠ¨çš„ç‰¹ç‚¹ï¼Œéš¾é“å°±æ˜¯å®ƒåœ¨æ–°å»ºç«‹çš„è¿žæŽ¥ä¸èƒ½å¤Ÿä¸€å¼€å§‹å°±å‘é€å¤§å°ºå¯¸çš„æ•°æ®åŒ…ï¼Œè€Œåªèƒ½ä»Žä¸€ä¸ªå°å°ºå¯¸çš„åŒ…å¼€å§‹å‘é€ï¼Œåœ¨å‘é€å’Œæ•°æ®è¢«å¯¹æ–¹ç¡®è®¤çš„è¿‡ç¨‹ä¸­åŽ»è®¡ç®—å¯¹æ–¹çš„æŽ¥æ”¶é€Ÿåº¦ï¼Œæ¥é€æ­¥å¢žåŠ æ¯æ¬¡å‘é€çš„æ•°æ®é‡ï¼Œä½†æ˜¯è¿™æ ·çš„è¯ æ€§èƒ½å‘¢ï¼Œè¯·ç§‘æ™®ä¸‹ï¼Œè°¢è°¢ã€‚

5.å¦‚ä½•ç”¨HTTPå®žçŽ°é•¿è¿žæŽ¥ï¼Ÿ

é¦–å…ˆHTTPæ˜¯æ— çŠ¶æ€çš„ï¼Œè¦ç»´æŒä¸€ä¸ªé•¿è¿žæŽ¥å¯ä»¥ç”¨å¿ƒè·³åŒ…å•Šï¼Œå…¬å¸é¡¹ç›®ç¬¬ä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯è¿™æ ·ç”¨çš„ï¼Œç„¶åŽå„ç§åŽŸå› ï¼Œå„ç§å‘µå‘µå‘µï¼Œä¸¢åŒ…ï¼Œæ²¾åŒ…ï¼Œåº”è¯¥å¯ä»¥å¯¹httpè¿žæŽ¥è¿›è¡Œè½®è¯¢ï¼Œä½†æ˜¯httpå®šæ—¶è½®è¯¢ä¼šå­˜åœ¨å»¶è¿Ÿ ç”¨æˆ·ä½“éªŒå°±ä¸å¥½äº† æˆ–è€…ç”¨socketæµæ–¹æ³•ï¼Œç›‘å¬æœåŠ¡å™¨æ¶ˆæ¯

6.HTTP2.0é’ˆå¯¹åŒä¸€ä¸ªåŸŸåçš„å¤šä¸ªè¯·æ±‚ï¼Œä¼šå»ºç«‹å¤šå°‘ä¸ªtcpè¿žæŽ¥ï¼Ÿ

ä¸€ä¸ªå—ï¼Ÿä¸æ˜¯å¾ˆæ¸…æ¥šå•Šã€‚

7.æ•°æ®åº“å»ºè¡¨çš„æ—¶å€™ç´¢å¼•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

åˆ›å»ºç´¢å¼•å¯ä»¥å¤§å¤§æé«˜ç³»ç»Ÿçš„æ€§èƒ½ï¼ŒåŠ å¿«æ•°æ®çš„æ£€ç´¢é€Ÿåº¦ï¼ŒåŠ é€Ÿè¡¨å’Œè¡¨ä¹‹é—´çš„è¿žæŽ¥ï¼Œä¿è¯æ•°æ®åº“è¡¨ä¸­æ¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ€§ï¼Œä½†æ˜¯æœ‰äº›åˆ—ä¸åº”è¯¥åˆ›å»ºç´¢å¼•ï¼Œè¿™åˆè¦è€ƒè™‘åˆ°æ€§èƒ½äº†ï¼Œæ‰€ä»¥å…·ä½“æƒ…å†µå…·ä½“åˆ†æžäº†ã€‚

8.Full Text Searchä¸ºä»€ä¹ˆå¿«ï¼Ÿ

è¿™æˆ‘ä¸æ˜¯åŽå°ä¸æ˜¯å¾ˆäº†è§£ï¼Œé—®é¢˜ååŽå°ç³»ç»Ÿå¤šä¸€ç‚¹ç‚¹äº†ï¼Œä½†æ˜¯è‡ªå·±ä¼šå†™ä¸€ç‚¹ç‚¹PHPï¼Œå¥½åƒæ˜¯ç”¨ç©ºé—´æ¥æ¢æ—¶é—´,é€šè¿‡åˆ†è¯å™¨ï¼Œé™ç´¢å¼•çš„è¡¨åˆ†å‰²å•¥çš„ï¼Œä¸æ˜¯å¾ˆæ¸…æ¥šåŽŸç†å•Šï¼Œçœ‹æ¥è¦ç³»ç»Ÿå­¦ä¸‹åŽå°è¯­è¨€ã€‚

9.iOSä¸‹å¦‚ä½•å®žçŽ°æŒ‡å®šçº¿ç¨‹æ•°ç›®çš„çº¿ç¨‹æ± ï¼Ÿ

è¿™ä¸ªé—®é¢˜é—®çš„å¤ªæ·±äº†å§ï¼Œä¸€èˆ¬å¼€å‘æ ¹æœ¬ç”¨ä¸åˆ°ï¼Œè¿˜å¥½æœ€è¿‘åœ¨çœ‹çº¿ç¨‹å®‰å…¨æ–¹é¢çš„ä¹¦ç±ï¼Œè¦ä¸ç„¶é—®åˆ°çœŸçš„ä¼šæ‡µé€¼ã€‚

1.å¾ªçŽ¯é€šè¿‡pthread_createåˆ›å»ºçº¿ç¨‹ï¼Œåˆ›å»ºs_tfthreadå¯¹è±¡åšä¸ºçº¿ç¨‹å¥ï¼ŒåŠ å…¥çº¿ç¨‹æ•°ç»„,s_tftask_content->methordåˆå§‹åŒ–ä¸ºç©ºå‡½æ•°

2.åˆ›å»ºä»»åŠ¡æ‰§è¡Œå‡½æ•°ï¼Œæ‰§è¡Œå®Œé€šè¿‡taskåˆå§‹åŒ–å‡½æ•°åŽï¼Œåœ¨æ‰§è¡Œå‡½æ•°ä¸­é€šè¿‡pthread_cond_waitä¿¡å·å°†å½“å‰åˆ›å»ºçš„çº¿ç¨‹æŒ‚èµ·

3.åˆ›å»ºå®Œä¹‹åŽï¼Œç¨‹åºä¸­å°†ä¼šæœ‰nä¸ªæŒ‚èµ·çŠ¶æ€çš„çº¿ç¨‹ï¼Œå½“éœ€è¦æ‰§è¡Œæ–°çš„taskçš„æ—¶å€™æŸ¥æ‰¾ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®ä¸åŒçš„taskæ ‡å¿—åœ¨k_threadsä¸­æŸ¥è¯¢å‡ºç©ºé—²çº¿ç¨‹ï¼Œå¹¶åˆ›å»ºæ–°çš„s_tftask_contentåŠ å…¥s_tfthreadçš„ä»»åŠ¡åˆ—è¡¨ï¼Œé€šè¿‡pthread_cond_signalé‡æ–°å”¤é†’è¯¥çº¿ç¨‹ç»§ç»­æ‰§è¡Œä»»åŠ¡

10.ä»‹ç»ä¸‹iOSè®¾å¤‡èŽ·å–å”¯ä¸€è®¾å¤‡å·çš„åŽ†å²å˜è¿ã€‚

è¿™ä¸ªæ²¡åšè¿‡å‡ å¹´å¼€å‘çš„çœŸå¿ƒä¸çŸ¥é“ï¼ŒiOSä¸­èŽ·å–è®¾å¤‡å”¯ä¸€æ ‡ç¤ºç¬¦çš„æ–¹æ³•ä¸€ç›´éšç‰ˆæœ¬çš„æ›´æ–°è€Œå˜åŒ–ã€‚iOS 2.0ç‰ˆæœ¬ä»¥åŽUIDeviceæä¾›ä¸€ä¸ªèŽ·å–è®¾å¤‡å”¯ä¸€æ ‡è¯†ç¬¦çš„æ–¹æ³•uniqueIdentifierï¼Œä½†æ˜¯å¥½åƒæ˜¯iOS 4è¿˜æ˜¯iOS5å°±è¢«è‹¹æžœåºŸå¼ƒæŽ‰äº†ï¼Œç„¶åŽiOS6æ˜¯ç”¨WiFiçš„macåœ°å€æ¥èŽ·å–çš„ï¼ŒiOS7åŽå¤§å®¶éƒ½çŸ¥é“äº†ï¼Œä¸»è¦æ˜¯ç”±äºŽè‹¹æžœåˆå‘çˆ¹äº†ï¼Œå°æ€macåœ°å€ï¼Œä½†æ˜¯æŽ¨èå¤§å®¶ç”¨KeyChainæ¥ä¿å­˜èŽ·å–åˆ°çš„UDIDï¼Œå› ä¸ºAPPåˆ äº†å†è£…å›žæ¥ï¼Œä¹Ÿå¯ä»¥ä»ŽKeyChainä¸­è¯»å–å›žæ¥ï¼Œå“ˆå“ˆï¼Œå…¬å¸çš„é¡¹ç›®éƒ½æ˜¯æŠŠUDIDå­˜åœ¨KeyChainã€‚

11.å‡½æ•°å¼ç¼–ç¨‹å½“ä¸­çš„ first-class functionæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ

è¿™ä¸ªé—®é¢˜å¥½åƒä»¥å‰å°±åœ¨çŸ¥ä¹Žçœ‹è¿‡ï¼Œå°±æ˜¯ç±»åž‹ï¼Œå®šä¹‰äº†ä¸€ä¸ªå¯ä»¥æ“ä½œçš„å–å€¼çš„é›†åˆï¼Œå°±åƒCè¯­è¨€çš„intç±»åž‹ä¸€æ ·ï¼Œå¯è¿›è¡ŒåŠ å‡ä¹˜é™¤ç­‰æ“ä½œï¼Œä½†æ˜¯å®ƒçš„è®¾è®¡åˆæœ‰ä¸€ä¸ªæ¨¡å—å¤ç”¨å’Œè®¿å­˜æŽ§åˆ¶,è¿™æ ·è®¾è®¡çš„åŽŸå› åº”è¯¥æ˜¯è®©æˆ‘ä»¬æ›´å¥½ç”¨å§ï¼Œæ²¡æœ‰æ·±ç©¶è¿‡è¿™ä¸ªã€‚

12.å¦‚ä½•ä½¿ç”¨runtime hookä¸€ä¸ªclassçš„æŸä¸ªæ–¹æ³•ï¼Œåˆå¦‚ä½•hookæŸä¸ªinstanceçš„æ–¹æ³•ï¼Ÿ

åšåˆ°è¿™é‡Œåœ¨ç”µè„‘ç å­—å¿«ä¸‰ååˆ†é’Ÿäº†å•Šï¼Œpeakå¤§å¤§ï¼Œä½ é—®çš„é—®é¢˜éƒ½å¥½éš¾å›žç­”å•Šï¼Œè¦åˆ†å„ç§æƒ…å†µã€‚è¿™é¢˜ä¹Ÿæ˜¯é¦–å…ˆè¦è€ƒè™‘ hookæ˜¯å¦æœ‰å…¬å¼€å¤´æ–‡ä»¶çš„ç±»ï¼Œæœ‰çš„è¯å†™ä¸€ä¸ªUtilityå‡½æ•°ï¼Œå†ä½¿ç”¨categoryï¼Œæ²¡æœ‰çš„è¯å°±å»ºä¸€ä¸ªç±»ä½œä¸ºæ–°å‡½æ•°è½½ä½“ï¼Œç„¶åŽå…ˆä¸ºè¢«hookçš„ç±»å¢žåŠ å‡½æ•°ï¼Œå†æ›¿æ¢ï¼Œæ²¡é”™å°±æ˜¯è¿™ä¸ªæ ·å­ã€‚åŽé¢å¦‚ä½•hå¦‚ä½•hookæŸä¸ªinstanceçš„æ–¹æ³•ï¼Œåº”è¯¥å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆå˜é‡ï¼Œhookæ—¶å°†è¦è°ƒç”¨çš„åœ°å€èµ‹ç»™è¿™ä¸ªå˜é‡ï¼Œè°ƒç”¨æ—¶æŠŠè¿™ä¸ªå˜é‡å½“ä½œå‡½æ•°æ¥ç”¨å°±è¡Œäº†ã€‚

13.è°ˆä¸‹Objective Céƒ½æœ‰å“ªäº›é”æœºåˆ¶ï¼Œä½ ä¸€èˆ¬ç”¨å“ªä¸ªï¼Ÿ

synchronizedã€NSLOCKã€GCDã€é€’å½’é”ã€åˆ†å¸ƒé”ã€åŒæ­¥é”ï¼ˆè¿™ä¸ªæ˜¯Cè¯­è¨€çš„ï¼‰ï¼Œä¸€èˆ¬ç”¨GCDï¼Œè¿™é‡Œå°±ä¸è¯´äº†ï¼ŒçœŸå¿ƒä¸æƒ³ç å­—äº†ï¼Œpeakå¤§å¤§å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆï¼Œåˆè¦æŠŠå„ç§é”æœºåˆ¶å¯¹æ¯”ï¼Œè¿™æˆ‘ä¼šç–¯ï¼Œæˆ‘è„‘è¢‹è¦æ­»æœºäº†ï¼Œé‡å¯ä¸­â€¦

14.èŠä¸‹HTTP postçš„bodyä½“ä½¿ç”¨form-urlencodedå’Œmultipart/form-dataçš„åŒºåˆ«ã€‚

httpå®šä¹‰äº†ä¸ŽæœåŠ¡å™¨äº¤äº’çš„ä¸åŒæ–¹æ³•ï¼Œæœ€åŸºæœ¬çš„æ–¹æ³•æœ‰4ç§ï¼Œåˆ†åˆ«æ˜¯GETï¼ŒPOSTï¼ŒPUTï¼ŒDELETEï¼Œåˆšå¥½å…¬å¸ä¸Šä¸ªé¡¹ç›®éƒ½ç”¨äº†è¿™å››ç§æ–¹å¼çš„è¯·æ±‚ï¼Œæ€Žä¹ˆéƒ½æ˜¯è¸©è¿‡å¾—å‘ã€‚

form-urlencodedæ˜¯é»˜è®¤çš„mimeå†…å®¹ç¼–ç ç±»åž‹ï¼Œæ˜¯é€šç”¨çš„ï¼Œä½†æ˜¯å®ƒåœ¨ä¼ è¾“æ¯”è¾ƒå¤§çš„äºŒè¿›åˆ¶æˆ–è€…æ–‡æœ¬æ•°æ®æ—¶æ•ˆçŽ‡æžä½Žã€‚

multipart/form-dataæ˜¯å½“ä¸Šä¼ æ–‡ä»¶æˆ–è€…äºŒè¿›åˆ¶æ•°æ®å’ŒéžASCIIæ•°æ®ä½¿ç”¨ã€‚

15.è®©ä½ è®¾è®¡ä¸€ç§æœºåˆ¶æ£€æµ‹UIViewControllerçš„å†…å­˜æ³„æ¼ï¼Œä½ ä¼šæ€Žä¹ˆåšï¼Ÿ

è¿™ä¸ªé—®é¢˜æ²¡æœ‰è€ƒè™‘è¿‡ï¼Œéƒ½æ˜¯è‡ªå·±å†™å•å…ƒæµ‹è¯•ä»€ä¹ˆçš„æ¥æµ‹è¯•ï¼Œéƒ½æ˜¯äº›åŸºç¡€çš„æµ‹è¯•ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨Instrumentæ¥æµ‹è¯•ä¸€äº›ä¸œè¥¿çš„ã€‚è‡ªå·±è®¾è®¡çš„è¯ï¼Œä¸»è¦è¿˜æ˜¯è¦è€ƒè™‘ä¸€ä¸ªVCçš„ç”Ÿå‘½å‘¨æœŸã€‚

16.é€šè¿‡[UIImage imageNamed:]ç”Ÿæˆçš„å¯¹è±¡ä»€ä¹ˆæ—¶å€™è¢«é‡Šæ”¾ï¼Ÿ

åº”è¯¥æ˜¯åˆ°@autoreleasepool ç»“æŸçš„æ—¶å€™æ‰é‡Šæ”¾çš„ï¼Œä½†æ˜¯æˆ‘éƒ½æ˜¯ç”¨è¿™imageWithContentsOfFileæ–¹æ³•åŠ è½½å›¾ç‰‡çš„

17.applicationWillEnterForegroundå’ŒapplicationDidBecomeActiveéƒ½ä¼šåœ¨å“ªäº›åœºæ™¯ä¸‹è¢«è°ƒç”¨ï¼Ÿä¸¾ä¾‹è¶Šå¤šè¶Šå¥½ã€‚

æŽ¨é€ã€åšæ”¯ä»˜çš„æ—¶å€™ï¼Œè·³åˆ°äººå®¶è¿ç”¨ï¼ŒåŽå°æ€è¿›ç¨‹çš„æ—¶å€™ã€åšIMçš„æ—¶å€™ã€ç¬¬ä¸‰æ–¹æŽˆæƒåˆ†äº«ç™»å½•å›žè°ƒæƒ…å†µä¸‹ç­‰ç­‰

18.å¦‚ä½•ç»ˆæ­¢æ­£åœ¨è¿è¡Œçš„å·¥ä½œçº¿ç¨‹ï¼Ÿ

åœ¨çº¿ç¨‹ä¸­è°ƒç”¨exitã€pthread_exitã€pthread_killã€pthread_canceéƒ½è¡Œå§

19.ç©·ä¸¾iOSä¸‹æ‰€æœ‰çš„æœ¬åœ°æŒä¹…åŒ–æ–¹æ¡ˆã€‚

æ²™ç›’

plistæ–‡ä»¶ï¼ˆå±žæ€§åˆ—è¡¨ï¼‰

preferenceï¼ˆåå¥½è®¾ç½®ï¼‰

NSKeyedArchiverï¼ˆå½’æ¡£ï¼‰

SQLite 3

CoreData

è¿˜æœ‰è¯·è¡¥å……...

20.å¦‚æžœå…¬å¸å¼ºåˆ¶996ï¼Œä½ æœ‰ä»€ä¹ˆå¿ƒé‡Œè¯è¦å¯¹è€æ¿è¯´å—ï¼Ÿ

æ²¡ä»€ä¹ˆè¯ï¼Œä¹ æƒ¯äº†ï¼Œä¸»è¦æƒ³è¦å¯¹äº§å“ç»ç†è¯´ä½ çš„éœ€æ±‚èƒ½ä¸èƒ½æƒ³å¥½åœ¨åšï¼Œä¸è¦çžŽæžï¼Œè°¢è°¢

swiftçŸ¥è¯†ç‚¹æ€»ç»“ï¼š

Swift å¢žåŠ äº†å¯é€‰ï¼ˆOptionalï¼‰ç±»åž‹ï¼Œç”¨äºŽå¤„ç†å€¼ç¼ºå¤±çš„æƒ…å†µã€‚å¯é€‰è¡¨ç¤º â€œé‚£å„¿æœ‰ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”å®ƒç­‰äºŽ x â€ æˆ–è€… â€œé‚£å„¿æ²¡æœ‰å€¼â€ ã€‚å¯é€‰æœ‰ç‚¹åƒåœ¨ Objective-C ä¸­ä½¿ç”¨ nil ï¼Œä½†æ˜¯å®ƒå¯ä»¥ç”¨åœ¨ä»»ä½•ç±»åž‹ä¸Šï¼Œä¸ä»…ä»…æ˜¯ç±»ã€‚å¯é€‰ç±»åž‹æ¯” Objective-C ä¸­çš„ nil æŒ‡é’ˆæ›´åŠ å®‰å…¨ä¹Ÿæ›´å…·è¡¨çŽ°åŠ›ã€‚

Swift æ˜¯ä¸€é—¨ç±»åž‹å®‰å…¨çš„è¯­è¨€

ä½ å¯ä»¥ç”¨ä»»ä½•ä½ å–œæ¬¢çš„å­—ç¬¦ä½œä¸ºå¸¸é‡å’Œå˜é‡åï¼ŒåŒ…æ‹¬ Unicode å­—ç¬¦ï¼š

	let Ï€ = 3.14159
	let ä½ å¥½ = "ä½ å¥½ä¸–ç•Œ"
	let ðŸ¶ðŸ® = "dogcow"

å¸¸é‡ä¸Žå˜é‡åä¸èƒ½åŒ…å«æ•°å­¦ç¬¦å·ï¼Œç®­å¤´ï¼Œä¿ç•™çš„ï¼ˆæˆ–è€…éžæ³•çš„ï¼‰Unicode ç ä½ï¼Œè¿žçº¿ä¸Žåˆ¶è¡¨ç¬¦ã€‚ä¹Ÿä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼Œä½†æ˜¯å¯ä»¥åœ¨å¸¸é‡ä¸Žå˜é‡åçš„å…¶ä»–åœ°æ–¹åŒ…å«æ•°å­—ã€‚

æ³¨æ„ï¼š
å¦‚æžœä½ éœ€è¦ä½¿ç”¨ä¸ŽSwiftä¿ç•™å…³é”®å­—ç›¸åŒçš„åç§°ä½œä¸ºå¸¸é‡æˆ–è€…å˜é‡åï¼Œä½ å¯ä»¥ä½¿ç”¨åå¼•å·ï¼ˆ`ï¼‰å°†å…³é”®å­—åŒ…å›´çš„æ–¹å¼å°†å…¶ä½œä¸ºåå­—ä½¿ç”¨ã€‚æ— è®ºå¦‚ä½•ï¼Œä½ åº”å½“é¿å…ä½¿ç”¨å…³é”®å­—ä½œä¸ºå¸¸é‡æˆ–å˜é‡åï¼Œé™¤éžä½ åˆ«æ— é€‰æ‹©ã€‚

æœ‰ä¸€ç§æƒ…å†µä¸‹å¿…é¡»è¦ç”¨åˆ†å·ï¼Œå³ä½ æ‰“ç®—åœ¨åŒä¸€è¡Œå†…å†™å¤šæ¡ç‹¬ç«‹çš„è¯­å¥ï¼š

	let cat = "ðŸ±"; print(cat)
	// è¾“å‡º "ðŸ±"

å½“æŽ¨æ–­æµ®ç‚¹æ•°çš„ç±»åž‹æ—¶ï¼ŒSwift æ€»æ˜¯ä¼šé€‰æ‹© Double è€Œä¸æ˜¯Floatã€‚

ç±»åž‹åˆ«å
ç±»åž‹åˆ«åï¼ˆtype aliasesï¼‰å°±æ˜¯ç»™çŽ°æœ‰ç±»åž‹å®šä¹‰å¦ä¸€ä¸ªåå­—ã€‚ä½ å¯ä»¥ä½¿ç”¨typealiaså…³é”®å­—æ¥å®šä¹‰ç±»åž‹åˆ«åã€‚

typealias AudioSample = UInt16

>__æ³¨æ„ï¼š
å¦‚æžœä¸€ä¸ªå˜é‡ä¹‹åŽå¯èƒ½å˜æˆnilçš„è¯è¯·ä¸è¦ä½¿ç”¨éšå¼è§£æžå¯é€‰ç±»åž‹ã€‚å¦‚æžœä½ éœ€è¦åœ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸­åˆ¤æ–­æ˜¯å¦æ˜¯nilçš„è¯ï¼Œè¯·ä½¿ç”¨æ™®é€šå¯é€‰ç±»åž‹ã€‚__

ä½ å¯ä»¥ä½¿ç”¨å…¨å±€ assert(_:_:file:line:) å‡½æ•°æ¥å†™ä¸€ä¸ªæ–­è¨€ã€‚å‘è¿™ä¸ªå‡½æ•°ä¼ å…¥ä¸€ä¸ªç»“æžœä¸º true æˆ–è€… false çš„è¡¨è¾¾å¼ä»¥åŠä¸€æ¡ä¿¡æ¯ï¼Œå½“è¡¨è¾¾å¼çš„ç»“æžœä¸º false çš„æ—¶å€™è¿™æ¡ä¿¡æ¯ä¼šè¢«æ˜¾ç¤ºï¼š

	let age = -3
	assert(age >= 0, "A person's age cannot be less than zero")
	// å› ä¸º age < 0ï¼Œæ‰€ä»¥æ–­è¨€ä¼šè§¦å‘

>**æ³¨æ„ï¼š
Swift æ ‡å‡†åº“åªèƒ½æ¯”è¾ƒä¸ƒä¸ªä»¥å†…å…ƒç´ çš„å…ƒç»„æ¯”è¾ƒå‡½æ•°ã€‚å¦‚æžœä½ çš„å…ƒç»„å…ƒç´ è¶…è¿‡ä¸ƒä¸ªæ—¶ï¼Œä½ éœ€è¦è‡ªå·±å®žçŽ°æ¯”è¾ƒè¿ç®—ç¬¦ã€‚**

ä¾‹å¦‚ï¼Œå¦‚æžœä½ ç”¨å››ä¸ªå­—ç¬¦çš„å•è¯cafeåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œç„¶åŽæ·»åŠ ä¸€ä¸ªCOMBINING ACTUE ACCENT(U+0301)ä½œä¸ºå­—ç¬¦ä¸²çš„ç»“å°¾ã€‚æœ€ç»ˆè¿™ä¸ªå­—ç¬¦ä¸²çš„å­—ç¬¦æ•°é‡ä»ç„¶æ˜¯4ï¼Œå› ä¸ºç¬¬å››ä¸ªå­—ç¬¦æ˜¯Ã©ï¼Œè€Œä¸æ˜¯eï¼š

	var word = "cafe"
	print("the number of characters in \(word) is \(word.characters.count)")
	// æ‰“å°è¾“å‡º "the number of characters in cafe is 4"
	
	word += "\u{301}"    // COMBINING ACUTE ACCENT, U+0301
	
	print("the number of characters in \(word) is \(word.characters.count)")
	// æ‰“å°è¾“å‡º "the number of characters in cafÃ© is 4"

>æ³¨æ„ï¼š

>å¯æ‰©å±•çš„å­—ç¬¦ç¾¤é›†å¯ä»¥ç»„æˆä¸€ä¸ªæˆ–è€…å¤šä¸ª Unicode æ ‡é‡ã€‚è¿™æ„å‘³ç€ä¸åŒçš„å­—ç¬¦ä»¥åŠç›¸åŒå­—ç¬¦çš„ä¸åŒè¡¨ç¤ºæ–¹å¼å¯èƒ½éœ€è¦ä¸åŒæ•°é‡çš„å†…å­˜ç©ºé—´æ¥å­˜å‚¨ã€‚æ‰€ä»¥ Swift ä¸­çš„å­—ç¬¦åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å¹¶ä¸ä¸€å®šå ç”¨ç›¸åŒçš„å†…å­˜ç©ºé—´æ•°é‡ã€‚å› æ­¤åœ¨æ²¡æœ‰èŽ·å–å­—ç¬¦ä¸²çš„å¯æ‰©å±•çš„å­—ç¬¦ç¾¤çš„èŒƒå›´æ—¶å€™ï¼Œå°±ä¸èƒ½è®¡ç®—å‡ºå­—ç¬¦ä¸²çš„å­—ç¬¦æ•°é‡ã€‚å¦‚æžœæ‚¨æ­£åœ¨å¤„ç†ä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼Œéœ€è¦æ³¨æ„characterså±žæ€§å¿…é¡»éåŽ†å…¨éƒ¨çš„ Unicode æ ‡é‡ï¼Œæ¥ç¡®å®šå­—ç¬¦ä¸²çš„å­—ç¬¦æ•°é‡ã€‚

>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯é€šè¿‡characterså±žæ€§è¿”å›žçš„å­—ç¬¦æ•°é‡å¹¶ä¸æ€»æ˜¯ä¸ŽåŒ…å«ç›¸åŒå­—ç¬¦çš„NSStringçš„lengthå±žæ€§ç›¸åŒã€‚NSStringçš„lengthå±žæ€§æ˜¯åˆ©ç”¨ UTF-16 è¡¨ç¤ºçš„åå…­ä½ä»£ç å•å…ƒæ•°å­—ï¼Œè€Œä¸æ˜¯ Unicode å¯æ‰©å±•çš„å­—ç¬¦ç¾¤é›†ã€‚

Swift è¯­è¨€æä¾›Arraysã€Setså’ŒDictionariesä¸‰ç§åŸºæœ¬çš„é›†åˆç±»åž‹ç”¨æ¥å­˜å‚¨é›†åˆæ•°æ®ã€‚æ•°ç»„ï¼ˆArraysï¼‰æ˜¯æœ‰åºæ•°æ®çš„é›†ã€‚é›†åˆï¼ˆSetsï¼‰æ˜¯æ— åºæ— é‡å¤æ•°æ®çš„é›†ã€‚å­—å…¸ï¼ˆDictionariesï¼‰æ˜¯æ— åºçš„é”®å€¼å¯¹çš„é›†ã€‚

![]()

éšå¼è§£æžå¯é€‰ç±»åž‹


å€¼ç»‘å®šï¼ˆValue Bindingsï¼‰

case åˆ†æ”¯å…è®¸å°†åŒ¹é…çš„å€¼ç»‘å®šåˆ°ä¸€ä¸ªä¸´æ—¶çš„å¸¸é‡æˆ–å˜é‡ï¼Œå¹¶ä¸”åœ¨caseåˆ†æ”¯ä½“å†…ä½¿ç”¨ â€”â€” è¿™ç§è¡Œä¸ºè¢«ç§°ä¸ºå€¼ç»‘å®šï¼ˆvalue bindingï¼‰ï¼Œå› ä¸ºåŒ¹é…çš„å€¼åœ¨caseåˆ†æ”¯ä½“å†…ï¼Œä¸Žä¸´æ—¶çš„å¸¸é‡æˆ–å˜é‡ç»‘å®šã€‚

ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•åœ¨ä¸€ä¸ª(Int, Int)ç±»åž‹çš„å…ƒç»„ä¸­ä½¿ç”¨å€¼ç»‘å®šæ¥åˆ†ç±»ä¸‹å›¾ä¸­çš„ç‚¹(x, y)ï¼š

let anotherPoint = (2, 0)
switch anotherPoint {
case (let x, 0):
    print("on the x-axis with an x value of \(x)")
case (0, let y):
    print("on the y-axis with a y value of \(y)")
case let (x, y):
    print("somewhere else at (\(x), \(y))")
}
// è¾“å‡º "on the x-axis with an x value of 2"
image

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œswitchè¯­å¥ä¼šåˆ¤æ–­æŸä¸ªç‚¹æ˜¯å¦åœ¨çº¢è‰²çš„xè½´ä¸Šï¼Œæ˜¯å¦åœ¨æ©˜é»„è‰²çš„yè½´ä¸Šï¼Œæˆ–è€…ä¸åœ¨åæ ‡è½´ä¸Šã€‚

è¿™ä¸‰ä¸ª case éƒ½å£°æ˜Žäº†å¸¸é‡xå’Œyçš„å ä½ç¬¦ï¼Œç”¨äºŽä¸´æ—¶èŽ·å–å…ƒç»„anotherPointçš„ä¸€ä¸ªæˆ–ä¸¤ä¸ªå€¼ã€‚ç¬¬ä¸€ä¸ª case â€”â€”case (let x, 0)å°†åŒ¹é…ä¸€ä¸ªçºµåæ ‡ä¸º0çš„ç‚¹ï¼Œå¹¶æŠŠè¿™ä¸ªç‚¹çš„æ¨ªåæ ‡èµ‹ç»™ä¸´æ—¶çš„å¸¸é‡xã€‚ç±»ä¼¼çš„ï¼Œç¬¬äºŒä¸ª case â€”â€”case (0, let y)å°†åŒ¹é…ä¸€ä¸ªæ¨ªåæ ‡ä¸º0çš„ç‚¹ï¼Œå¹¶æŠŠè¿™ä¸ªç‚¹çš„çºµåæ ‡èµ‹ç»™ä¸´æ—¶çš„å¸¸é‡yã€‚

ä¸€æ—¦å£°æ˜Žäº†è¿™äº›ä¸´æ—¶çš„å¸¸é‡ï¼Œå®ƒä»¬å°±å¯ä»¥åœ¨å…¶å¯¹åº”çš„ case åˆ†æ”¯é‡Œä½¿ç”¨ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒä»¬ç”¨äºŽæ‰“å°ç»™å®šç‚¹çš„ç±»åž‹ã€‚

è¯·æ³¨æ„ï¼Œè¿™ä¸ªswitchè¯­å¥ä¸åŒ…å«é»˜è®¤åˆ†æ”¯ã€‚è¿™æ˜¯å› ä¸ºæœ€åŽä¸€ä¸ª case â€”â€”case let(x, y)å£°æ˜Žäº†ä¸€ä¸ªå¯ä»¥åŒ¹é…ä½™ä¸‹æ‰€æœ‰å€¼çš„å…ƒç»„ã€‚è¿™ä½¿å¾—switchè¯­å¥å·²ç»å®Œå¤‡äº†ï¼Œå› æ­¤ä¸éœ€è¦å†ä¹¦å†™é»˜è®¤åˆ†æ”¯ã€‚


Where

case åˆ†æ”¯çš„æ¨¡å¼å¯ä»¥ä½¿ç”¨whereè¯­å¥æ¥åˆ¤æ–­é¢å¤–çš„æ¡ä»¶ã€‚

ä¸‹é¢çš„ä¾‹å­æŠŠä¸‹å›¾ä¸­çš„ç‚¹(x, y)è¿›è¡Œäº†åˆ†ç±»ï¼š

let yetAnotherPoint = (1, -1)
switch yetAnotherPoint {
case let (x, y) where x == y:
    print("(\(x), \(y)) is on the line x == y")
case let (x, y) where x == -y:
    print("(\(x), \(y)) is on the line x == -y")
case let (x, y):
    print("(\(x), \(y)) is just some arbitrary point")
}
// è¾“å‡º "(1, -1) is on the line x == -y"
image

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œswitchè¯­å¥ä¼šåˆ¤æ–­æŸä¸ªç‚¹æ˜¯å¦åœ¨ç»¿è‰²çš„å¯¹è§’çº¿x == yä¸Šï¼Œæ˜¯å¦åœ¨ç´«è‰²çš„å¯¹è§’çº¿x == -yä¸Šï¼Œæˆ–è€…ä¸åœ¨å¯¹è§’çº¿ä¸Šã€‚

è¿™ä¸‰ä¸ª case éƒ½å£°æ˜Žäº†å¸¸é‡xå’Œyçš„å ä½ç¬¦ï¼Œç”¨äºŽä¸´æ—¶èŽ·å–å…ƒç»„yetAnotherPointçš„ä¸¤ä¸ªå€¼ã€‚è¿™ä¸¤ä¸ªå¸¸é‡è¢«ç”¨ä½œwhereè¯­å¥çš„ä¸€éƒ¨åˆ†ï¼Œä»Žè€Œåˆ›å»ºä¸€ä¸ªåŠ¨æ€çš„è¿‡æ»¤å™¨(filter)ã€‚å½“ä¸”ä»…å½“whereè¯­å¥çš„æ¡ä»¶ä¸ºtrueæ—¶ï¼ŒåŒ¹é…åˆ°çš„ case åˆ†æ”¯æ‰ä¼šè¢«æ‰§è¡Œã€‚

å°±åƒæ˜¯å€¼ç»‘å®šä¸­çš„ä¾‹å­ï¼Œç”±äºŽæœ€åŽä¸€ä¸ª case åˆ†æ”¯åŒ¹é…äº†ä½™ä¸‹æ‰€æœ‰å¯èƒ½çš„å€¼ï¼Œswitchè¯­å¥å°±å·²ç»å®Œå¤‡äº†ï¼Œå› æ­¤ä¸éœ€è¦å†ä¹¦å†™é»˜è®¤åˆ†æ”¯ã€‚

è´¯ç©¿

Swift ä¸­çš„switchä¸ä¼šä»Žä¸Šä¸€ä¸ª case åˆ†æ”¯è½å…¥åˆ°ä¸‹ä¸€ä¸ª case åˆ†æ”¯ä¸­ã€‚ç›¸åï¼Œåªè¦ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„ case åˆ†æ”¯å®Œæˆäº†å®ƒéœ€è¦æ‰§è¡Œçš„è¯­å¥ï¼Œæ•´ä¸ªswitchä»£ç å—å®Œæˆäº†å®ƒçš„æ‰§è¡Œã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒC è¯­è¨€è¦æ±‚ä½ æ˜¾å¼åœ°æ’å…¥breakè¯­å¥åˆ°æ¯ä¸ª case åˆ†æ”¯çš„æœ«å°¾æ¥é˜»æ­¢è‡ªåŠ¨è½å…¥åˆ°ä¸‹ä¸€ä¸ª case åˆ†æ”¯ä¸­ã€‚Swift çš„è¿™ç§é¿å…é»˜è®¤è½å…¥åˆ°ä¸‹ä¸€ä¸ªåˆ†æ”¯ä¸­çš„ç‰¹æ€§æ„å‘³ç€å®ƒçš„switch åŠŸèƒ½è¦æ¯” C è¯­è¨€çš„æ›´åŠ æ¸…æ™°å’Œå¯é¢„æµ‹ï¼Œå¯ä»¥é¿å…æ— æ„è¯†åœ°æ‰§è¡Œå¤šä¸ª case åˆ†æ”¯ä»Žè€Œå¼•å‘çš„é”™è¯¯ã€‚

å¦‚æžœä½ ç¡®å®žéœ€è¦ C é£Žæ ¼çš„è´¯ç©¿çš„ç‰¹æ€§ï¼Œä½ å¯ä»¥åœ¨æ¯ä¸ªéœ€è¦è¯¥ç‰¹æ€§çš„ case åˆ†æ”¯ä¸­ä½¿ç”¨fallthroughå…³é”®å­—ã€‚ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨fallthroughæ¥åˆ›å»ºä¸€ä¸ªæ•°å­—çš„æè¿°è¯­å¥ã€‚

let integerToDescribe = 5
var description = "The number \(integerToDescribe) is"
switch integerToDescribe {
case 2, 3, 5, 7, 11, 13, 17, 19:
    description += " a prime number, and also"
    fallthrough
default:
    description += " an integer."
}
print(description)
// è¾“å‡º "The number 5 is a prime number, and also an integer."

>æ³¨æ„ï¼š fallthroughå…³é”®å­—ä¸ä¼šæ£€æŸ¥å®ƒä¸‹ä¸€ä¸ªå°†ä¼šè½å…¥æ‰§è¡Œçš„ case ä¸­çš„åŒ¹é…æ¡ä»¶ã€‚fallthroughç®€å•åœ°ä½¿ä»£ç ç»§ç»­è¿žæŽ¥åˆ°ä¸‹ä¸€ä¸ª case ä¸­çš„ä»£ç ï¼Œè¿™å’Œ C è¯­è¨€æ ‡å‡†ä¸­çš„switchè¯­å¥ç‰¹æ€§æ˜¯ä¸€æ ·çš„ã€‚

å¸¦æ ‡ç­¾çš„è¯­å¥

	let finalSquare = 25
	var board = [Int](repeating: 0, count: finalSquare + 1)
	board[03] = +08; board[06] = +11; board[09] = +09; board[10] = +02
	board[14] = -10; board[19] = -11; board[22] = -02; board[24] = -08
	var square = 0
	var diceRoll = 0
	
	gameLoop: while square != finalSquare {
	    diceRoll += 1
	    if diceRoll == 7 { diceRoll = 1 }
	    switch square + diceRoll {
	    case finalSquare:
	        // éª°å­æ•°åˆšå¥½ä½¿çŽ©å®¶ç§»åŠ¨åˆ°æœ€ç»ˆçš„æ–¹æ ¼é‡Œï¼Œæ¸¸æˆç»“æŸã€‚
	        break gameLoop
	    case let newSquare where newSquare > finalSquare:
	        // éª°å­æ•°å°†ä¼šä½¿çŽ©å®¶çš„ç§»åŠ¨è¶…å‡ºæœ€åŽçš„æ–¹æ ¼ï¼Œé‚£ä¹ˆè¿™ç§ç§»åŠ¨æ˜¯ä¸åˆæ³•çš„ï¼ŒçŽ©å®¶éœ€è¦é‡æ–°æŽ·éª°å­
	        continue gameLoop
	    default:
	        // åˆæ³•ç§»åŠ¨ï¼Œåšæ­£å¸¸çš„å¤„ç†
	        square += diceRoll
	        square += board[square]
	    }
	}
	print("Game over!")

>æ³¨æ„ï¼š
å¦‚æžœä¸Šè¿°çš„breakè¯­å¥æ²¡æœ‰ä½¿ç”¨gameLoopæ ‡ç­¾ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šä¸­æ–­switchè¯­å¥è€Œä¸æ˜¯whileå¾ªçŽ¯ã€‚ä½¿ç”¨gameLoopæ ‡ç­¾æ¸…æ™°çš„è¡¨æ˜Žäº†breakæƒ³è¦ä¸­æ–­çš„æ˜¯å“ªä¸ªä»£ç å—ã€‚ åŒæ—¶è¯·æ³¨æ„ï¼Œå½“è°ƒç”¨continue gameLoopåŽ»è·³è½¬åˆ°ä¸‹ä¸€æ¬¡å¾ªçŽ¯è¿­ä»£æ—¶ï¼Œè¿™é‡Œä½¿ç”¨gameLoopæ ‡ç­¾å¹¶ä¸æ˜¯ä¸¥æ ¼å¿…é¡»çš„ã€‚å› ä¸ºåœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œåªæœ‰ä¸€ä¸ªå¾ªçŽ¯ä½“ï¼Œæ‰€ä»¥continueè¯­å¥ä¼šå½±å“åˆ°å“ªä¸ªå¾ªçŽ¯ä½“æ˜¯æ²¡æœ‰æ­§ä¹‰çš„ã€‚ç„¶è€Œï¼Œcontinueè¯­å¥ä½¿ç”¨gameLoopæ ‡ç­¾ä¹Ÿæ˜¯æ²¡æœ‰å±å®³çš„ã€‚è¿™æ ·åšç¬¦åˆæ ‡ç­¾çš„ä½¿ç”¨è§„åˆ™ï¼ŒåŒæ—¶å‚ç…§æ—è¾¹çš„break gameLoopï¼Œèƒ½å¤Ÿä½¿æ¸¸æˆçš„é€»è¾‘æ›´åŠ æ¸…æ™°å’Œæ˜“äºŽç†è§£ã€‚

æ£€æµ‹ API å¯ç”¨æ€§
Swiftå†…ç½®æ”¯æŒæ£€æŸ¥ API å¯ç”¨æ€§ï¼Œè¿™å¯ä»¥ç¡®ä¿æˆ‘ä»¬ä¸ä¼šåœ¨å½“å‰éƒ¨ç½²æœºå™¨ä¸Šï¼Œä¸å°å¿ƒåœ°ä½¿ç”¨äº†ä¸å¯ç”¨çš„APIã€‚

æˆ‘ä»¬åœ¨ifæˆ–guardè¯­å¥ä¸­ä½¿ç”¨å¯ç”¨æ€§æ¡ä»¶ï¼ˆavailability condition)åŽ»æœ‰æ¡ä»¶çš„æ‰§è¡Œä¸€æ®µä»£ç ï¼Œæ¥åœ¨è¿è¡Œæ—¶åˆ¤æ–­è°ƒç”¨çš„APIæ˜¯å¦å¯ç”¨ã€‚ç¼–è¯‘å™¨ä½¿ç”¨ä»Žå¯ç”¨æ€§æ¡ä»¶è¯­å¥ä¸­èŽ·å–çš„ä¿¡æ¯åŽ»éªŒè¯ï¼Œåœ¨è¿™ä¸ªä»£ç å—ä¸­è°ƒç”¨çš„ API æ˜¯å¦å¯ç”¨ã€‚

	if #available(iOS 10, macOS 10.12, *) {
	    // åœ¨ iOS ä½¿ç”¨ iOS 10 çš„ API, åœ¨ macOS ä½¿ç”¨ macOS 10.12 çš„ API
	} else {
	    // ä½¿ç”¨å…ˆå‰ç‰ˆæœ¬çš„ iOS å’Œ macOS çš„ API
	}
ä»¥ä¸Šå¯ç”¨æ€§æ¡ä»¶æŒ‡å®šï¼Œåœ¨iOSä¸­ï¼Œifè¯­å¥çš„ä»£ç å—ä»…ä»…åœ¨ iOS 10 åŠæ›´é«˜çš„ç³»ç»Ÿä¸‹è¿è¡Œï¼›åœ¨ macOSä¸­ï¼Œä»…åœ¨ macOS 10.12 åŠæ›´é«˜æ‰ä¼šè¿è¡Œã€‚æœ€åŽä¸€ä¸ªå‚æ•°ï¼Œ*ï¼Œæ˜¯å¿…é¡»çš„ï¼Œç”¨äºŽæŒ‡å®šåœ¨æ‰€æœ‰å…¶å®ƒå¹³å°ä¸­ï¼Œå¦‚æžœç‰ˆæœ¬å·é«˜äºŽä½ çš„è®¾å¤‡æŒ‡å®šçš„æœ€ä½Žç‰ˆæœ¬ï¼Œifè¯­å¥çš„ä»£ç å—å°†ä¼šè¿è¡Œã€‚

åœ¨å®ƒä¸€èˆ¬çš„å½¢å¼ä¸­ï¼Œå¯ç”¨æ€§æ¡ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå¹³å°åå­—å’Œç‰ˆæœ¬çš„åˆ—è¡¨ã€‚å¹³å°åå­—å¯ä»¥æ˜¯iOSï¼ŒmacOSï¼ŒwatchOSå’ŒtvOSâ€”â€”è¯·è®¿é—®å£°æ˜Žå±žæ€§æ¥èŽ·å–å®Œæ•´åˆ—è¡¨ã€‚é™¤äº†æŒ‡å®šåƒ iOS 8çš„ä¸»æ¿æœ¬å·ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šåƒiOS 8.3 ä»¥åŠ macOS 10.10.3çš„å­ç‰ˆæœ¬å·ã€‚

	if #available(platform name version, ..., *) {
	    APIs å¯ç”¨ï¼Œè¯­å¥å°†æ‰§è¡Œ
	} else {
	    APIs ä¸å¯ç”¨ï¼Œè¯­å¥å°†ä¸æ‰§è¡Œ
	}

é—­åŒ…è¡¨è¾¾å¼è¯­æ³•

é—­åŒ…è¡¨è¾¾å¼è¯­æ³•æœ‰å¦‚ä¸‹çš„ä¸€èˆ¬å½¢å¼ï¼š

{ (parameters) -> returnType in
    statements
}

é€ƒé€¸é—­åŒ…
è¿™ç±»å‡½æ•°ä¼šåœ¨å¼‚æ­¥æ“ä½œå¼€å§‹ä¹‹åŽç«‹åˆ»è¿”å›žï¼Œä½†æ˜¯é—­åŒ…ç›´åˆ°å¼‚æ­¥æ“ä½œç»“æŸåŽæ‰ä¼šè¢«è°ƒç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé—­åŒ…éœ€è¦â€œé€ƒé€¸â€å‡ºå‡½æ•°ï¼Œå› ä¸ºé—­åŒ…éœ€è¦åœ¨å‡½æ•°è¿”å›žä¹‹åŽè¢«è°ƒç”¨ã€‚

é€’å½’æžšä¸¾
é€’å½’æžšä¸¾æ˜¯ä¸€ç§æžšä¸¾ç±»åž‹ï¼Œå®ƒæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæžšä¸¾æˆå‘˜ä½¿ç”¨è¯¥æžšä¸¾ç±»åž‹çš„å®žä¾‹ä½œä¸ºå…³è”å€¼ã€‚ä½¿ç”¨é€’å½’æžšä¸¾æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæ’å…¥ä¸€ä¸ªé—´æŽ¥å±‚ã€‚ä½ å¯ä»¥åœ¨æžšä¸¾æˆå‘˜å‰åŠ ä¸Šindirectæ¥è¡¨ç¤ºè¯¥æˆå‘˜å¯é€’å½’ã€‚

ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæžšä¸¾ç±»åž‹å­˜å‚¨äº†ç®€å•çš„ç®—æœ¯è¡¨è¾¾å¼ï¼š

enum ArithmeticExpression {
    case number(Int)
    indirect case addition(ArithmeticExpression, ArithmeticExpression)
    indirect case multiplication(ArithmeticExpression, ArithmeticExpression)
}
ä½ ä¹Ÿå¯ä»¥åœ¨æžšä¸¾ç±»åž‹å¼€å¤´åŠ ä¸Šindirectå…³é”®å­—æ¥è¡¨æ˜Žå®ƒçš„æ‰€æœ‰æˆå‘˜éƒ½æ˜¯å¯é€’å½’çš„ï¼š

indirect enum ArithmeticExpression {
    case number(Int)
    case addition(ArithmeticExpression, ArithmeticExpression)
    case multiplication(ArithmeticExpression, ArithmeticExpression)
}
ä¸Šé¢å®šä¹‰çš„æžšä¸¾ç±»åž‹å¯ä»¥å­˜å‚¨ä¸‰ç§ç®—æœ¯è¡¨è¾¾å¼ï¼šçº¯æ•°å­—ã€ä¸¤ä¸ªè¡¨è¾¾å¼ç›¸åŠ ã€ä¸¤ä¸ªè¡¨è¾¾å¼ç›¸ä¹˜ã€‚æžšä¸¾æˆå‘˜additionå’Œmultiplicationçš„å…³è”å€¼ä¹Ÿæ˜¯ç®—æœ¯è¡¨è¾¾å¼â€”â€”è¿™äº›å…³è”å€¼ä½¿å¾—åµŒå¥—è¡¨è¾¾å¼æˆä¸ºå¯èƒ½ã€‚ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼(5 + 4) * 2ï¼Œä¹˜å·å³è¾¹æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå·¦è¾¹åˆ™æ˜¯å¦ä¸€ä¸ªè¡¨è¾¾å¼ã€‚å› ä¸ºæ•°æ®æ˜¯åµŒå¥—çš„ï¼Œå› è€Œç”¨æ¥å­˜å‚¨æ•°æ®çš„æžšä¸¾ç±»åž‹ä¹Ÿéœ€è¦æ”¯æŒè¿™ç§åµŒå¥—â€”â€”è¿™æ„å‘³ç€æžšä¸¾ç±»åž‹éœ€è¦æ”¯æŒé€’å½’ã€‚ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†ä½¿ç”¨ArithmeticExpressionè¿™ä¸ªé€’å½’æžšä¸¾åˆ›å»ºè¡¨è¾¾å¼(5 + 4) * 2

let five = ArithmeticExpression.number(5)
let four = ArithmeticExpression.number(4)
let sum = ArithmeticExpression.addition(five, four)
let product = ArithmeticExpression.multiplication(sum, ArithmeticExpression.number(2))
è¦æ“ä½œå…·æœ‰é€’å½’æ€§è´¨çš„æ•°æ®ç»“æž„ï¼Œä½¿ç”¨é€’å½’å‡½æ•°æ˜¯ä¸€ç§ç›´æˆªäº†å½“çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹ç®—æœ¯è¡¨è¾¾å¼æ±‚å€¼çš„å‡½æ•°ï¼š

func evaluate(_ expression: ArithmeticExpression) -> Int {
    switch expression {
    case let .number(value):
        return value
    case let .addition(left, right):
        return evaluate(left) + evaluate(right)
    case let .multiplication(left, right):
        return evaluate(left) * evaluate(right)
    }
}

print(evaluate(product))
// æ‰“å° "18"
è¯¥å‡½æ•°å¦‚æžœé‡åˆ°çº¯æ•°å­—ï¼Œå°±ç›´æŽ¥è¿”å›žè¯¥æ•°å­—çš„å€¼ã€‚å¦‚æžœé‡åˆ°çš„æ˜¯åŠ æ³•æˆ–ä¹˜æ³•è¿ç®—ï¼Œåˆ™åˆ†åˆ«è®¡ç®—å·¦è¾¹è¡¨è¾¾å¼å’Œå³è¾¹è¡¨è¾¾å¼çš„å€¼ï¼Œç„¶åŽç›¸åŠ æˆ–ç›¸ä¹˜ã€‚

ç±»å’Œç»“æž„ä½“å¯¹æ¯”
Swift ä¸­ç±»å’Œç»“æž„ä½“æœ‰å¾ˆå¤šå…±åŒç‚¹ã€‚å…±åŒå¤„åœ¨äºŽï¼š

å®šä¹‰å±žæ€§ç”¨äºŽå­˜å‚¨å€¼
å®šä¹‰æ–¹æ³•ç”¨äºŽæä¾›åŠŸèƒ½
å®šä¹‰ä¸‹æ ‡æ“ä½œä½¿å¾—å¯ä»¥é€šè¿‡ä¸‹æ ‡è¯­æ³•æ¥è®¿é—®å®žä¾‹æ‰€åŒ…å«çš„å€¼
å®šä¹‰æž„é€ å™¨ç”¨äºŽç”Ÿæˆåˆå§‹åŒ–å€¼
é€šè¿‡æ‰©å±•ä»¥å¢žåŠ é»˜è®¤å®žçŽ°çš„åŠŸèƒ½
å®žçŽ°åè®®ä»¥æä¾›æŸç§æ ‡å‡†åŠŸèƒ½
æ›´å¤šä¿¡æ¯è¯·å‚è§å±žæ€§ï¼Œæ–¹æ³•ï¼Œä¸‹æ ‡ï¼Œæž„é€ è¿‡ç¨‹ï¼Œæ‰©å±•ï¼Œå’Œåè®®ã€‚

ä¸Žç»“æž„ä½“ç›¸æ¯”ï¼Œç±»è¿˜æœ‰å¦‚ä¸‹çš„é™„åŠ åŠŸèƒ½ï¼š

ç»§æ‰¿å…è®¸ä¸€ä¸ªç±»ç»§æ‰¿å¦ä¸€ä¸ªç±»çš„ç‰¹å¾
ç±»åž‹è½¬æ¢å…è®¸åœ¨è¿è¡Œæ—¶æ£€æŸ¥å’Œè§£é‡Šä¸€ä¸ªç±»å®žä¾‹çš„ç±»åž‹
æžæž„å™¨å…è®¸ä¸€ä¸ªç±»å®žä¾‹é‡Šæ”¾ä»»ä½•å…¶æ‰€è¢«åˆ†é…çš„èµ„æº
å¼•ç”¨è®¡æ•°å…è®¸å¯¹ä¸€ä¸ªç±»çš„å¤šæ¬¡å¼•ç”¨

æŒ‰ç…§é€šç”¨çš„å‡†åˆ™ï¼Œå½“ç¬¦åˆä¸€æ¡æˆ–å¤šæ¡ä»¥ä¸‹æ¡ä»¶æ—¶ï¼Œè¯·è€ƒè™‘æž„å»ºç»“æž„ä½“ï¼š

è¯¥æ•°æ®ç»“æž„çš„ä¸»è¦ç›®çš„æ˜¯ç”¨æ¥å°è£…å°‘é‡ç›¸å…³ç®€å•æ•°æ®å€¼ã€‚
æœ‰ç†ç”±é¢„è®¡è¯¥æ•°æ®ç»“æž„çš„å®žä¾‹åœ¨è¢«èµ‹å€¼æˆ–ä¼ é€’æ—¶ï¼Œå°è£…çš„æ•°æ®å°†ä¼šè¢«æ‹·è´è€Œä¸æ˜¯è¢«å¼•ç”¨ã€‚
è¯¥æ•°æ®ç»“æž„ä¸­å‚¨å­˜çš„å€¼ç±»åž‹å±žæ€§ï¼Œä¹Ÿåº”è¯¥è¢«æ‹·è´ï¼Œè€Œä¸æ˜¯è¢«å¼•ç”¨ã€‚
è¯¥æ•°æ®ç»“æž„ä¸éœ€è¦åŽ»ç»§æ‰¿å¦ä¸€ä¸ªæ—¢æœ‰ç±»åž‹çš„å±žæ€§æˆ–è€…è¡Œä¸ºã€‚
ä¸¾ä¾‹æ¥è¯´ï¼Œä»¥ä¸‹æƒ…å¢ƒä¸­é€‚åˆä½¿ç”¨ç»“æž„ä½“ï¼š

å‡ ä½•å½¢çŠ¶çš„å¤§å°ï¼Œå°è£…ä¸€ä¸ªwidthå±žæ€§å’Œheightå±žæ€§ï¼Œä¸¤è€…å‡ä¸ºDoubleç±»åž‹ã€‚
ä¸€å®šèŒƒå›´å†…çš„è·¯å¾„ï¼Œå°è£…ä¸€ä¸ªstartå±žæ€§å’Œlengthå±žæ€§ï¼Œä¸¤è€…å‡ä¸ºIntç±»åž‹ã€‚
ä¸‰ç»´åæ ‡ç³»å†…ä¸€ç‚¹ï¼Œå°è£…xï¼Œyå’Œzå±žæ€§ï¼Œä¸‰è€…å‡ä¸ºDoubleç±»åž‹ã€‚

å»¶è¿Ÿå­˜å‚¨å±žæ€§

å»¶è¿Ÿå­˜å‚¨å±žæ€§æ˜¯æŒ‡å½“ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè®¡ç®—å…¶åˆå§‹å€¼çš„å±žæ€§ã€‚åœ¨å±žæ€§å£°æ˜Žå‰ä½¿ç”¨ lazy æ¥æ ‡ç¤ºä¸€ä¸ªå»¶è¿Ÿå­˜å‚¨å±žæ€§ã€‚

æ³¨æ„
å¿…é¡»å°†å»¶è¿Ÿå­˜å‚¨å±žæ€§å£°æ˜Žæˆå˜é‡ï¼ˆä½¿ç”¨ var å…³é”®å­—ï¼‰ï¼Œå› ä¸ºå±žæ€§çš„åˆå§‹å€¼å¯èƒ½åœ¨å®žä¾‹æž„é€ å®Œæˆä¹‹åŽæ‰ä¼šå¾—åˆ°ã€‚è€Œå¸¸é‡å±žæ€§åœ¨æž„é€ è¿‡ç¨‹å®Œæˆä¹‹å‰å¿…é¡»è¦æœ‰åˆå§‹å€¼ï¼Œå› æ­¤æ— æ³•å£°æ˜Žæˆå»¶è¿Ÿå±žæ€§ã€‚
å»¶è¿Ÿå±žæ€§å¾ˆæœ‰ç”¨ï¼Œå½“å±žæ€§çš„å€¼ä¾èµ–äºŽåœ¨å®žä¾‹çš„æž„é€ è¿‡ç¨‹ç»“æŸåŽæ‰ä¼šçŸ¥é“å½±å“å€¼çš„å¤–éƒ¨å› ç´ æ—¶ï¼Œæˆ–è€…å½“èŽ·å¾—å±žæ€§çš„åˆå§‹å€¼éœ€è¦å¤æ‚æˆ–å¤§é‡è®¡ç®—æ—¶ï¼Œå¯ä»¥åªåœ¨éœ€è¦çš„æ—¶å€™è®¡ç®—å®ƒã€‚

ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨äº†å»¶è¿Ÿå­˜å‚¨å±žæ€§æ¥é¿å…å¤æ‚ç±»ä¸­ä¸å¿…è¦çš„åˆå§‹åŒ–ã€‚ä¾‹å­ä¸­å®šä¹‰äº† DataImporter å’Œ DataManager ä¸¤ä¸ªç±»ï¼Œä¸‹é¢æ˜¯éƒ¨åˆ†ä»£ç ï¼š

class DataImporter {
    /*
    DataImporter æ˜¯ä¸€ä¸ªè´Ÿè´£å°†å¤–éƒ¨æ–‡ä»¶ä¸­çš„æ•°æ®å¯¼å…¥çš„ç±»ã€‚
    è¿™ä¸ªç±»çš„åˆå§‹åŒ–ä¼šæ¶ˆè€—ä¸å°‘æ—¶é—´ã€‚
    */
    var fileName = "data.txt"
    // è¿™é‡Œä¼šæä¾›æ•°æ®å¯¼å…¥åŠŸèƒ½
}

class DataManager {
    lazy var importer = DataImporter()
    var data = [String]()
    // è¿™é‡Œä¼šæä¾›æ•°æ®ç®¡ç†åŠŸèƒ½
}

let manager = DataManager()
manager.data.append("Some data")
manager.data.append("Some more data")
// DataImporter å®žä¾‹çš„ importer å±žæ€§è¿˜æ²¡æœ‰è¢«åˆ›å»º
DataManager ç±»åŒ…å«ä¸€ä¸ªåä¸º data çš„å­˜å‚¨å±žæ€§ï¼Œåˆå§‹å€¼æ˜¯ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²ï¼ˆStringï¼‰æ•°ç»„ã€‚è¿™é‡Œæ²¡æœ‰ç»™å‡ºå…¨éƒ¨ä»£ç ï¼Œåªéœ€çŸ¥é“ DataManager ç±»çš„ç›®çš„æ˜¯ç®¡ç†å’Œæä¾›å¯¹è¿™ä¸ªå­—ç¬¦ä¸²æ•°ç»„çš„è®¿é—®å³å¯ã€‚

DataManager çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯ä»Žæ–‡ä»¶å¯¼å…¥æ•°æ®ã€‚è¯¥åŠŸèƒ½ç”± DataImporter ç±»æä¾›ï¼ŒDataImporter å®Œæˆåˆå§‹åŒ–éœ€è¦æ¶ˆè€—ä¸å°‘æ—¶é—´ï¼šå› ä¸ºå®ƒçš„å®žä¾‹åœ¨åˆå§‹åŒ–æ—¶å¯èƒ½è¦æ‰“å¼€æ–‡ä»¶ï¼Œè¿˜è¦è¯»å–æ–‡ä»¶å†…å®¹åˆ°å†…å­˜ã€‚

DataManager ç®¡ç†æ•°æ®æ—¶ä¹Ÿå¯èƒ½ä¸ä»Žæ–‡ä»¶ä¸­å¯¼å…¥æ•°æ®ã€‚æ‰€ä»¥å½“ DataManager çš„å®žä¾‹è¢«åˆ›å»ºæ—¶ï¼Œæ²¡å¿…è¦åˆ›å»ºä¸€ä¸ª DataImporter çš„å®žä¾‹ï¼Œæ›´æ˜Žæ™ºçš„åšæ³•æ˜¯ç¬¬ä¸€æ¬¡ç”¨åˆ° DataImporter çš„æ—¶å€™æ‰åŽ»åˆ›å»ºå®ƒã€‚

ç”±äºŽä½¿ç”¨äº† lazy ï¼Œimporter å±žæ€§åªæœ‰åœ¨ç¬¬ä¸€æ¬¡è¢«è®¿é—®çš„æ—¶å€™æ‰è¢«åˆ›å»ºã€‚æ¯”å¦‚è®¿é—®å®ƒçš„å±žæ€§ fileName æ—¶ï¼š

print(manager.importer.fileName)
// DataImporter å®žä¾‹çš„ importer å±žæ€§çŽ°åœ¨è¢«åˆ›å»ºäº†
// è¾“å‡º "data.txtâ€
æ³¨æ„
å¦‚æžœä¸€ä¸ªè¢«æ ‡è®°ä¸º lazy çš„å±žæ€§åœ¨æ²¡æœ‰åˆå§‹åŒ–æ—¶å°±åŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ï¼Œåˆ™æ— æ³•ä¿è¯è¯¥å±žæ€§åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ã€‚

ç±»åž‹å±žæ€§è¯­æ³•

åœ¨ C æˆ– Objective-C ä¸­ï¼Œä¸ŽæŸä¸ªç±»åž‹å…³è”çš„é™æ€å¸¸é‡å’Œé™æ€å˜é‡ï¼Œæ˜¯ä½œä¸ºå…¨å±€ï¼ˆglobalï¼‰é™æ€å˜é‡å®šä¹‰çš„ã€‚ä½†æ˜¯åœ¨ Swift ä¸­ï¼Œç±»åž‹å±žæ€§æ˜¯ä½œä¸ºç±»åž‹å®šä¹‰çš„ä¸€éƒ¨åˆ†å†™åœ¨ç±»åž‹æœ€å¤–å±‚çš„èŠ±æ‹¬å·å†…ï¼Œå› æ­¤å®ƒçš„ä½œç”¨èŒƒå›´ä¹Ÿå°±åœ¨ç±»åž‹æ”¯æŒçš„èŒƒå›´å†…ã€‚

ä½¿ç”¨å…³é”®å­— static æ¥å®šä¹‰ç±»åž‹å±žæ€§ã€‚åœ¨ä¸ºç±»å®šä¹‰è®¡ç®—åž‹ç±»åž‹å±žæ€§æ—¶ï¼Œå¯ä»¥æ”¹ç”¨å…³é”®å­— class æ¥æ”¯æŒå­ç±»å¯¹çˆ¶ç±»çš„å®žçŽ°è¿›è¡Œé‡å†™ã€‚ä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº†å­˜å‚¨åž‹å’Œè®¡ç®—åž‹ç±»åž‹å±žæ€§çš„è¯­æ³•ï¼š

struct SomeStructure {
    static var storedTypeProperty = "Some value."
    static var computedTypeProperty: Int {
        return 1
    }
}
enum SomeEnumeration {
    static var storedTypeProperty = "Some value."
    static var computedTypeProperty: Int {
        return 6
    }
}
class SomeClass {
    static var storedTypeProperty = "Some value."
    static var computedTypeProperty: Int {
        return 27
    }
    class var overrideableComputedTypeProperty: Int {
        return 107
    }
}


åœ¨å¯å˜æ–¹æ³•ä¸­ç»™ self èµ‹å€¼

å¯å˜æ–¹æ³•èƒ½å¤Ÿèµ‹ç»™éšå«å±žæ€§selfä¸€ä¸ªå…¨æ–°çš„å®žä¾‹ã€‚ä¸Šé¢Pointçš„ä¾‹å­å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼æ”¹å†™ï¼š

struct Point {
    var x = 0.0, y = 0.0
    mutating func moveBy(x deltaX: Double, y deltaY: Double) {
        self = Point(x: x + deltaX, y: y + deltaY)
    }
}
åªèƒ½ç”¨äºŽç»“æž„ä½“ä¸­(æˆ–è€…è¯´å€¼ç±»åž‹ä¸­ï¼Œæˆ‘çŒœçš„ï¼Œè€Œä¸èƒ½ç”¨äºŽç±»ä¸­å¼•ç”¨ç±»åž‹)

å› ä¸ºå…è®¸åœ¨è°ƒç”¨advance(to:)æ—¶å€™å¿½ç•¥è¿”å›žå€¼ï¼Œä¸ä¼šäº§ç”Ÿç¼–è¯‘è­¦å‘Šï¼Œæ‰€ä»¥å‡½æ•°è¢«æ ‡æ³¨ä¸º@ discardableResultå±žæ€§

ä¸‹æ ‡

struct TimesTable {
    let multiplier: Int
    subscript(index: Int) -> Int {
        return multiplier * index
    }
}
let threeTimesTable = TimesTable(multiplier: 3)
print("six times three is \(threeTimesTable[6])")
// æ‰“å° "six times three is 18"

é˜²æ­¢é‡å†™
ä½ å¯ä»¥é€šè¿‡æŠŠæ–¹æ³•ï¼Œå±žæ€§æˆ–ä¸‹æ ‡æ ‡è®°ä¸ºfinalæ¥é˜²æ­¢å®ƒä»¬è¢«é‡å†™ï¼Œåªéœ€è¦åœ¨å£°æ˜Žå…³é”®å­—å‰åŠ ä¸Šfinalä¿®é¥°ç¬¦å³å¯ï¼ˆä¾‹å¦‚ï¼šfinal varï¼Œfinal funcï¼Œfinal class funcï¼Œä»¥åŠfinal subscriptï¼‰ã€‚

å¦‚æžœä½ é‡å†™äº†å¸¦æœ‰finalæ ‡è®°çš„æ–¹æ³•ï¼Œå±žæ€§æˆ–ä¸‹æ ‡ï¼Œåœ¨ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ã€‚åœ¨ç±»æ‰©å±•ä¸­çš„æ–¹æ³•ï¼Œå±žæ€§æˆ–ä¸‹æ ‡ä¹Ÿå¯ä»¥åœ¨æ‰©å±•çš„å®šä¹‰é‡Œæ ‡è®°ä¸º final çš„ã€‚

ä½ å¯ä»¥é€šè¿‡åœ¨å…³é”®å­—classå‰æ·»åŠ finalä¿®é¥°ç¬¦ï¼ˆfinal classï¼‰æ¥å°†æ•´ä¸ªç±»æ ‡è®°ä¸º final çš„ã€‚è¿™æ ·çš„ç±»æ˜¯ä¸å¯è¢«ç»§æ‰¿çš„ï¼Œè¯•å›¾ç»§æ‰¿è¿™æ ·çš„ç±»ä¼šå¯¼è‡´ç¼–è¯‘æŠ¥é”™ã€‚

ä¸å¸¦å¤–éƒ¨åçš„æž„é€ å™¨å‚æ•°

init(_ celsius: Double){
        temperatureInCelsius = celsius
    }
}
let bodyTemperature = Celsius(37.0)
// bodyTemperature.temperatureInCelsius ä¸º 37.0

struct Color {
    let red, green, blue: Double
    init(red: Double, green: Double, blue: Double) {
        self.red   = red
        self.green = green
        self.blue  = blue
    }
    init(white: Double) {
        red   = white
        green = white
        blue  = white
    }
}
ä¸¤ç§æž„é€ å™¨éƒ½èƒ½ç”¨äºŽåˆ›å»ºä¸€ä¸ªæ–°çš„Colorå®žä¾‹ï¼Œä½ éœ€è¦ä¸ºæž„é€ å™¨æ¯ä¸ªå¤–éƒ¨å‚æ•°ä¼ å€¼ï¼š

let magenta = Color(red: 1.0, green: 0.0, blue: 1.0)
let halfGray = Color(white: 0.5)
æ³¨æ„ï¼Œå¦‚æžœä¸é€šè¿‡å¤–éƒ¨å‚æ•°åå­—ä¼ å€¼ï¼Œä½ æ˜¯æ²¡æ³•è°ƒç”¨è¿™ä¸ªæž„é€ å™¨çš„ã€‚åªè¦æž„é€ å™¨å®šä¹‰äº†æŸä¸ªå¤–éƒ¨å‚æ•°åï¼Œä½ å°±å¿…é¡»ä½¿ç”¨å®ƒï¼Œå¿½ç•¥å®ƒå°†å¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼š

let veryGreen = Color(0.0, 1.0, 0.0)
// æŠ¥ç¼–è¯‘æ—¶é”™è¯¯ï¼Œéœ€è¦å¤–éƒ¨åç§°

ç»“æž„ä½“çš„é€ä¸€æˆå‘˜æž„é€ å™¨
struct Size {
    var width = 0.0, height = 0.0
}
let twoByTwo = Size(width: 2.0, height: 2.0)


æž„é€ å™¨çš„ç»§æ‰¿å’Œé‡å†™

è·Ÿ Objective-C ä¸­çš„å­ç±»ä¸åŒï¼ŒSwift ä¸­çš„å­ç±»é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šç»§æ‰¿çˆ¶ç±»çš„æž„é€ å™¨ã€‚Swift çš„è¿™ç§æœºåˆ¶å¯ä»¥é˜²æ­¢ä¸€ä¸ªçˆ¶ç±»çš„ç®€å•æž„é€ å™¨è¢«ä¸€ä¸ªæ›´ç²¾ç»†çš„å­ç±»ç»§æ‰¿ï¼Œå¹¶è¢«é”™è¯¯åœ°ç”¨æ¥åˆ›å»ºå­ç±»çš„å®žä¾‹ã€‚

æ³¨æ„
çˆ¶ç±»çš„æž„é€ å™¨ä»…ä¼šåœ¨å®‰å…¨å’Œé€‚å½“çš„æƒ…å†µä¸‹è¢«ç»§æ‰¿ã€‚å…·ä½“å†…å®¹è¯·å‚è€ƒåŽç»­ç« èŠ‚æž„é€ å™¨çš„è‡ªåŠ¨ç»§æ‰¿ã€‚


è§£å†³å®žä¾‹ä¹‹é—´çš„å¾ªçŽ¯å¼ºå¼•ç”¨
Swift æä¾›äº†ä¸¤ç§åŠžæ³•ç”¨æ¥è§£å†³ä½ åœ¨ä½¿ç”¨ç±»çš„å±žæ€§æ—¶æ‰€é‡åˆ°çš„å¾ªçŽ¯å¼ºå¼•ç”¨é—®é¢˜ï¼šå¼±å¼•ç”¨ï¼ˆweak referenceï¼‰å’Œæ— ä¸»å¼•ç”¨ï¼ˆunowned referenceï¼‰ã€‚

å¼±å¼•ç”¨å’Œæ— ä¸»å¼•ç”¨å…è®¸å¾ªçŽ¯å¼•ç”¨ä¸­çš„ä¸€ä¸ªå®žä¾‹å¼•ç”¨è€Œå¦å¤–ä¸€ä¸ªå®žä¾‹ä¸ä¿æŒå¼ºå¼•ç”¨ã€‚è¿™æ ·å®žä¾‹èƒ½å¤Ÿäº’ç›¸å¼•ç”¨è€Œä¸äº§ç”Ÿå¾ªçŽ¯å¼ºå¼•ç”¨ã€‚

å½“å…¶ä»–çš„å®žä¾‹æœ‰æ›´çŸ­çš„ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œä½¿ç”¨å¼±å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å…¶ä»–å®žä¾‹æžæž„åœ¨å…ˆæ—¶ã€‚åœ¨ä¸Šé¢å…¬å¯“çš„ä¾‹å­ä¸­ï¼Œå¾ˆæ˜¾ç„¶ä¸€ä¸ªå…¬å¯“åœ¨å®ƒçš„ç”Ÿå‘½å‘¨æœŸå†…ä¼šåœ¨æŸä¸ªæ—¶é—´æ®µæ²¡æœ‰å®ƒçš„ä¸»äººï¼Œæ‰€ä»¥ä¸€ä¸ªå¼±å¼•ç”¨å°±åŠ åœ¨å…¬å¯“ç±»é‡Œé¢ï¼Œé¿å…å¾ªçŽ¯å¼•ç”¨ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå½“å…¶ä»–å®žä¾‹æœ‰ç›¸åŒçš„æˆ–è€…æ›´é•¿ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œè¯·ä½¿ç”¨æ— ä¸»å¼•ç”¨ã€‚


å¼±å¼•ç”¨

å¼±å¼•ç”¨ä¸ä¼šå¯¹å…¶å¼•ç”¨çš„å®žä¾‹ä¿æŒå¼ºå¼•ç”¨ï¼Œå› è€Œä¸ä¼šé˜»æ­¢ ARC é”€æ¯è¢«å¼•ç”¨çš„å®žä¾‹ã€‚è¿™ä¸ªç‰¹æ€§é˜»æ­¢äº†å¼•ç”¨å˜ä¸ºå¾ªçŽ¯å¼ºå¼•ç”¨ã€‚å£°æ˜Žå±žæ€§æˆ–è€…å˜é‡æ—¶ï¼Œåœ¨å‰é¢åŠ ä¸Šweakå…³é”®å­—è¡¨æ˜Žè¿™æ˜¯ä¸€ä¸ªå¼±å¼•ç”¨ã€‚

å› ä¸ºå¼±å¼•ç”¨ä¸ä¼šä¿æŒæ‰€å¼•ç”¨çš„å®žä¾‹ï¼Œå³ä½¿å¼•ç”¨å­˜åœ¨ï¼Œå®žä¾‹ä¹Ÿæœ‰å¯èƒ½è¢«é”€æ¯ã€‚å› æ­¤ï¼ŒARC ä¼šåœ¨å¼•ç”¨çš„å®žä¾‹è¢«é”€æ¯åŽè‡ªåŠ¨å°†å…¶èµ‹å€¼ä¸ºnilã€‚å¹¶ä¸”å› ä¸ºå¼±å¼•ç”¨å¯ä»¥å…è®¸å®ƒä»¬çš„å€¼åœ¨è¿è¡Œæ—¶è¢«èµ‹å€¼ä¸ºnilï¼Œæ‰€ä»¥å®ƒä»¬ä¼šè¢«å®šä¹‰ä¸ºå¯é€‰ç±»åž‹å˜é‡ï¼Œè€Œä¸æ˜¯å¸¸é‡ã€‚

ä½ å¯ä»¥åƒå…¶ä»–å¯é€‰å€¼ä¸€æ ·ï¼Œæ£€æŸ¥å¼±å¼•ç”¨çš„å€¼æ˜¯å¦å­˜åœ¨ï¼Œä½ å°†æ°¸è¿œä¸ä¼šè®¿é—®å·²é”€æ¯çš„å®žä¾‹çš„å¼•ç”¨ã€‚

æ³¨æ„
å½“ ARC è®¾ç½®å¼±å¼•ç”¨ä¸ºnilæ—¶ï¼Œå±žæ€§è§‚å¯Ÿä¸ä¼šè¢«è§¦å‘ã€‚
ä¸‹é¢çš„ä¾‹å­è·Ÿä¸Šé¢Personå’ŒApartmentçš„ä¾‹å­ä¸€è‡´ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ã€‚è¿™ä¸€æ¬¡ï¼ŒApartmentçš„tenantå±žæ€§è¢«å£°æ˜Žä¸ºå¼±å¼•ç”¨ï¼š

class Person {
    let name: String
    init(name: String) { self.name = name }
    var apartment: Apartment?
    deinit { print("\(name) is being deinitialized") }
}

class Apartment {
    let unit: String
    init(unit: String) { self.unit = unit }
    weak var tenant: Person?
    deinit { print("Apartment \(unit) is being deinitialized") }
}
ç„¶åŽè·Ÿä¹‹å‰ä¸€æ ·ï¼Œå»ºç«‹ä¸¤ä¸ªå˜é‡ï¼ˆjohnå’Œunit4Aï¼‰ä¹‹é—´çš„å¼ºå¼•ç”¨ï¼Œå¹¶å…³è”ä¸¤ä¸ªå®žä¾‹ï¼š

var john: Person?
var unit4A: Apartment?

john = Person(name: "John Appleseed")
unit4A = Apartment(unit: "4A")

john!.apartment = unit4A
unit4A!.tenant = john

æ— ä¸»å¼•ç”¨

å’Œå¼±å¼•ç”¨ç±»ä¼¼ï¼Œæ— ä¸»å¼•ç”¨ä¸ä¼šç‰¢ç‰¢ä¿æŒä½å¼•ç”¨çš„å®žä¾‹ã€‚å’Œå¼±å¼•ç”¨ä¸åŒçš„æ˜¯ï¼Œæ— ä¸»å¼•ç”¨æ˜¯æ°¸è¿œæœ‰å€¼çš„ã€‚å› æ­¤ï¼Œæ— ä¸»å¼•ç”¨æ€»æ˜¯è¢«å®šä¹‰ä¸ºéžå¯é€‰ç±»åž‹ï¼ˆnon-optional typeï¼‰ã€‚ä½ å¯ä»¥åœ¨å£°æ˜Žå±žæ€§æˆ–è€…å˜é‡æ—¶ï¼Œåœ¨å‰é¢åŠ ä¸Šå…³é”®å­—unownedè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ— ä¸»å¼•ç”¨ã€‚

ç”±äºŽæ— ä¸»å¼•ç”¨æ˜¯éžå¯é€‰ç±»åž‹ï¼Œä½ ä¸éœ€è¦åœ¨ä½¿ç”¨å®ƒçš„æ—¶å€™å°†å®ƒå±•å¼€ã€‚æ— ä¸»å¼•ç”¨æ€»æ˜¯å¯ä»¥è¢«ç›´æŽ¥è®¿é—®ã€‚ä¸è¿‡ ARC æ— æ³•åœ¨å®žä¾‹è¢«é”€æ¯åŽå°†æ— ä¸»å¼•ç”¨è®¾ä¸ºnilï¼Œå› ä¸ºéžå¯é€‰ç±»åž‹çš„å˜é‡ä¸å…è®¸è¢«èµ‹å€¼ä¸ºnilã€‚

>æ³¨æ„:
å¦‚æžœä½ è¯•å›¾åœ¨å®žä¾‹è¢«é”€æ¯åŽï¼Œè®¿é—®è¯¥å®žä¾‹çš„æ— ä¸»å¼•ç”¨ï¼Œä¼šè§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚ä½¿ç”¨æ— ä¸»å¼•ç”¨ï¼Œä½ å¿…é¡»ç¡®ä¿å¼•ç”¨å§‹ç»ˆæŒ‡å‘ä¸€ä¸ªæœªé”€æ¯çš„å®žä¾‹ã€‚
è¿˜éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æžœä½ è¯•å›¾è®¿é—®å®žä¾‹å·²ç»è¢«é”€æ¯çš„æ— ä¸»å¼•ç”¨ï¼Œç¨‹åºä¼šç›´æŽ¥å´©æºƒï¼Œè€Œä¸ä¼šå‘ç”Ÿæ— æ³•é¢„æœŸçš„è¡Œä¸ºã€‚æ‰€ä»¥ä½ åº”å½“é¿å…è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿã€‚ 

ç”±äºŽä¿¡ç”¨å¡æ€»æ˜¯å…³è”ç€ä¸€ä¸ªå®¢æˆ·ï¼Œå› æ­¤å°†customerå±žæ€§å®šä¹‰ä¸ºæ— ä¸»å¼•ç”¨ï¼Œç”¨ä»¥é¿å…å¾ªçŽ¯å¼ºå¼•ç”¨ï¼š

    class Customer {
        let name: String
        var card: CreditCard?
        init(name: String) {
            self.name = name
        }
        deinit { println("\(name) is being deinitialized") }
    }

    class CreditCard {
        let number: Int
        unowned let customer: Customer
        init(number: Int, customer: Customer) {
            self.number = number
            self.customer = customer
        }
        deinit { println("Card #\(number) is being deinitialized") }
    }

ä¸‹é¢çš„ä»£ç ç‰‡æ®µå®šä¹‰äº†ä¸€ä¸ªå«johnçš„å¯é€‰ç±»åž‹Customerå˜é‡ï¼Œç”¨æ¥ä¿å­˜æŸä¸ªç‰¹å®šå®¢æˆ·çš„å¼•ç”¨ã€‚ç”±äºŽæ˜¯å¯é€‰ç±»åž‹ï¼Œæ‰€ä»¥å˜é‡è¢«åˆå§‹åŒ–ä¸ºnilã€‚

    var john: Customer?

çŽ°åœ¨ä½ å¯ä»¥åˆ›å»ºCustomerç±»çš„å®žä¾‹ï¼Œç”¨å®ƒåˆå§‹åŒ–CreditCardå®žä¾‹ï¼Œå¹¶å°†æ–°åˆ›å»ºçš„CreditCardå®žä¾‹èµ‹å€¼ä¸ºå®¢æˆ·çš„cardå±žæ€§ã€‚

    john = Customer(name: "John Appleseed")
    john!.card = CreditCard(number: 1234_5678_9012_3456, customer: john!)

Personå’ŒApartmentçš„ä¾‹å­å±•ç¤ºäº†ä¸¤ä¸ªå±žæ€§çš„å€¼éƒ½å…è®¸ä¸ºnilï¼Œå¹¶ä¼šæ½œåœ¨çš„äº§ç”Ÿå¾ªçŽ¯å¼ºå¼•ç”¨ã€‚è¿™ç§åœºæ™¯æœ€é€‚åˆç”¨å¼±å¼•ç”¨æ¥è§£å†³ã€‚

Customerå’ŒCreditCardçš„ä¾‹å­å±•ç¤ºäº†ä¸€ä¸ªå±žæ€§çš„å€¼å…è®¸ä¸ºnilï¼Œè€Œå¦ä¸€ä¸ªå±žæ€§çš„å€¼ä¸å…è®¸ä¸ºnilï¼Œå¹¶ä¼šæ½œåœ¨çš„äº§ç”Ÿå¾ªçŽ¯å¼ºå¼•ç”¨ã€‚è¿™ç§åœºæ™¯æœ€é€‚åˆé€šè¿‡æ— ä¸»å¼•ç”¨æ¥è§£å†³ã€‚

å®šä¹‰æ•èŽ·åˆ—è¡¨

æ•èŽ·åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½ç”±ä¸€å¯¹å…ƒç´ ç»„æˆï¼Œä¸€ä¸ªå…ƒç´ æ˜¯weakæˆ–unownedå…³é”®å­—ï¼Œå¦ä¸€ä¸ªå…ƒç´ æ˜¯ç±»å®žä¾‹çš„å¼•ç”¨ï¼ˆä¾‹å¦‚selfï¼‰æˆ–åˆå§‹åŒ–è¿‡çš„å˜é‡ï¼ˆå¦‚delegate = self.delegate!ï¼‰ã€‚è¿™äº›é¡¹åœ¨æ–¹æ‹¬å·ä¸­ç”¨é€—å·åˆ†å¼€ã€‚

å¦‚æžœé—­åŒ…æœ‰å‚æ•°åˆ—è¡¨å’Œè¿”å›žç±»åž‹ï¼ŒæŠŠæ•èŽ·åˆ—è¡¨æ”¾åœ¨å®ƒä»¬å‰é¢ï¼š

lazy var someClosure: (Int, String) -> String = {
    [unowned self, weak delegate = self.delegate!] (index: Int, stringToProcess: String) -> String in
    // è¿™é‡Œæ˜¯é—­åŒ…çš„å‡½æ•°ä½“
}

å¦‚æžœé—­åŒ…æ²¡æœ‰æŒ‡æ˜Žå‚æ•°åˆ—è¡¨æˆ–è€…è¿”å›žç±»åž‹ï¼Œå³å®ƒä»¬ä¼šé€šè¿‡ä¸Šä¸‹æ–‡æŽ¨æ–­ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠæ•èŽ·åˆ—è¡¨å’Œå…³é”®å­—inæ”¾åœ¨é—­åŒ…æœ€å¼€å§‹çš„åœ°æ–¹ï¼š

lazy var someClosure: Void -> String = {
    [unowned self, weak delegate = self.delegate!] in
    // è¿™é‡Œæ˜¯é—­åŒ…çš„å‡½æ•°ä½“
}


å¼±å¼•ç”¨å’Œæ— ä¸»å¼•ç”¨

åœ¨é—­åŒ…å’Œæ•èŽ·çš„å®žä¾‹æ€»æ˜¯äº’ç›¸å¼•ç”¨å¹¶ä¸”æ€»æ˜¯åŒæ—¶é”€æ¯æ—¶ï¼Œå°†é—­åŒ…å†…çš„æ•èŽ·å®šä¹‰ä¸ºæ— ä¸»å¼•ç”¨ã€‚

ç›¸åçš„ï¼Œåœ¨è¢«æ•èŽ·çš„å¼•ç”¨å¯èƒ½ä¼šå˜ä¸ºnilæ—¶ï¼Œå°†é—­åŒ…å†…çš„æ•èŽ·å®šä¹‰ä¸ºå¼±å¼•ç”¨ã€‚å¼±å¼•ç”¨æ€»æ˜¯å¯é€‰ç±»åž‹ï¼Œå¹¶ä¸”å½“å¼•ç”¨çš„å®žä¾‹è¢«é”€æ¯åŽï¼Œå¼±å¼•ç”¨çš„å€¼ä¼šè‡ªåŠ¨ç½®ä¸ºnilã€‚è¿™ä½¿æˆ‘ä»¬å¯ä»¥åœ¨é—­åŒ…ä½“å†…æ£€æŸ¥å®ƒä»¬æ˜¯å¦å­˜åœ¨ã€‚

>æ³¨æ„
å¦‚æžœè¢«æ•èŽ·çš„å¼•ç”¨ç»å¯¹ä¸ä¼šå˜ä¸ºnilï¼Œåº”è¯¥ç”¨æ— ä¸»å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¼±å¼•ç”¨ã€‚


æŒ‡å®šæ¸…ç†æ“ä½œ
å¯ä»¥ä½¿ç”¨deferè¯­å¥åœ¨å³å°†ç¦»å¼€å½“å‰ä»£ç å—æ—¶æ‰§è¡Œä¸€ç³»åˆ—è¯­å¥ã€‚è¯¥è¯­å¥è®©ä½ èƒ½æ‰§è¡Œä¸€äº›å¿…è¦çš„æ¸…ç†å·¥ä½œï¼Œä¸ç®¡æ˜¯ä»¥ä½•ç§æ–¹å¼ç¦»å¼€å½“å‰ä»£ç å—çš„â€”â€”æ— è®ºæ˜¯ç”±äºŽæŠ›å‡ºé”™è¯¯è€Œç¦»å¼€ï¼Œè¿˜æ˜¯ç”±äºŽè¯¸å¦‚returnæˆ–è€…breakçš„è¯­å¥ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨deferè¯­å¥æ¥ç¡®ä¿æ–‡ä»¶æè¿°ç¬¦å¾—ä»¥å…³é—­ï¼Œä»¥åŠæ‰‹åŠ¨åˆ†é…çš„å†…å­˜å¾—ä»¥é‡Šæ”¾ã€‚

deferè¯­å¥å°†ä»£ç çš„æ‰§è¡Œå»¶è¿Ÿåˆ°å½“å‰çš„ä½œç”¨åŸŸé€€å‡ºä¹‹å‰ã€‚è¯¥è¯­å¥ç”±deferå…³é”®å­—å’Œè¦è¢«å»¶è¿Ÿæ‰§è¡Œçš„è¯­å¥ç»„æˆã€‚å»¶è¿Ÿæ‰§è¡Œçš„è¯­å¥ä¸èƒ½åŒ…å«ä»»ä½•æŽ§åˆ¶è½¬ç§»è¯­å¥ï¼Œä¾‹å¦‚breakæˆ–æ˜¯returnè¯­å¥ï¼Œæˆ–æ˜¯æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚å»¶è¿Ÿæ‰§è¡Œçš„æ“ä½œä¼šæŒ‰ç…§å®ƒä»¬è¢«æŒ‡å®šæ—¶çš„é¡ºåºçš„ç›¸åé¡ºåºæ‰§è¡Œâ€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬ä¸€æ¡deferè¯­å¥ä¸­çš„ä»£ç ä¼šåœ¨ç¬¬äºŒæ¡deferè¯­å¥ä¸­çš„ä»£ç è¢«æ‰§è¡Œä¹‹åŽæ‰æ‰§è¡Œï¼Œä»¥æ­¤ç±»æŽ¨ã€‚

func processFile(filename: String) throws {
    if exists(filename) {
        let file = open(filename)
        defer {
            close(file)
        }
        while let line = try file.readline() {
            // å¤„ç†æ–‡ä»¶ã€‚
        }
        // close(file) ä¼šåœ¨è¿™é‡Œè¢«è°ƒç”¨ï¼Œå³ä½œç”¨åŸŸçš„æœ€åŽã€‚
    }
}
ä¸Šé¢çš„ä»£ç ä½¿ç”¨ä¸€æ¡deferè¯­å¥æ¥ç¡®ä¿open(_:)å‡½æ•°æœ‰ä¸€ä¸ªç›¸åº”çš„å¯¹close(_:)å‡½æ•°çš„è°ƒç”¨ã€‚


Any å’Œ AnyObject çš„ç±»åž‹è½¬æ¢
Swift ä¸ºä¸ç¡®å®šç±»åž‹æä¾›äº†ä¸¤ç§ç‰¹æ®Šçš„ç±»åž‹åˆ«åï¼š

* Any å¯ä»¥è¡¨ç¤ºä»»ä½•ç±»åž‹ï¼ŒåŒ…æ‹¬å‡½æ•°ç±»åž‹ã€‚
- AnyObject å¯ä»¥è¡¨ç¤ºä»»ä½•*ç±»*ç±»åž‹çš„å®žä¾‹ã€‚

Swift ä¸­çš„æ‰©å±•å¯ä»¥ï¼š

* æ·»åŠ è®¡ç®—åž‹å±žæ€§å’Œè®¡ç®—åž‹ç±»åž‹å±žæ€§
* å®šä¹‰å®žä¾‹æ–¹æ³•å’Œç±»åž‹æ–¹æ³•
* æä¾›æ–°çš„æž„é€ å™¨
* å®šä¹‰ä¸‹æ ‡
* å®šä¹‰å’Œä½¿ç”¨æ–°çš„åµŒå¥—ç±»åž‹
* ä½¿ä¸€ä¸ªå·²æœ‰ç±»åž‹ç¬¦åˆæŸä¸ªåè®®

>æ³¨æ„
>æ‰©å±•å¯ä»¥æ·»åŠ æ–°çš„è®¡ç®—åž‹å±žæ€§ï¼Œä½†æ˜¯ä¸å¯ä»¥æ·»åŠ å­˜å‚¨åž‹å±žæ€§ï¼Œä¹Ÿä¸å¯ä»¥ä¸ºå·²æœ‰å±žæ€§æ·»åŠ å±žæ€§è§‚å¯Ÿå™¨ã€‚

å±žæ€§è¦æ±‚
åè®®å¯ä»¥è¦æ±‚éµå¾ªåè®®çš„ç±»åž‹æä¾›ç‰¹å®šåç§°å’Œç±»åž‹çš„å®žä¾‹å±žæ€§æˆ–ç±»åž‹å±žæ€§ã€‚åè®®ä¸æŒ‡å®šå±žæ€§æ˜¯å­˜å‚¨åž‹å±žæ€§è¿˜æ˜¯è®¡ç®—åž‹å±žæ€§ï¼Œå®ƒåªæŒ‡å®šå±žæ€§çš„åç§°å’Œç±»åž‹ã€‚æ­¤å¤–ï¼Œåè®®è¿˜æŒ‡å®šå±žæ€§æ˜¯å¯è¯»çš„è¿˜æ˜¯å¯è¯»å¯å†™çš„ã€‚

æž„é€ å™¨è¦æ±‚åœ¨ç±»ä¸­çš„å®žçŽ°

ä½ å¯ä»¥åœ¨éµå¾ªåè®®çš„ç±»ä¸­å®žçŽ°æž„é€ å™¨ï¼Œæ— è®ºæ˜¯ä½œä¸ºæŒ‡å®šæž„é€ å™¨ï¼Œè¿˜æ˜¯ä½œä¸ºä¾¿åˆ©æž„é€ å™¨ã€‚æ— è®ºå“ªç§æƒ…å†µï¼Œä½ éƒ½å¿…é¡»ä¸ºæž„é€ å™¨å®žçŽ°æ ‡ä¸Š required ä¿®é¥°ç¬¦ï¼š

class SomeClass: SomeProtocol {
    required init(someParameter: Int) {
        // è¿™é‡Œæ˜¯æž„é€ å™¨çš„å®žçŽ°éƒ¨åˆ†
    }
}
ä½¿ç”¨ required ä¿®é¥°ç¬¦å¯ä»¥ç¡®ä¿æ‰€æœ‰å­ç±»ä¹Ÿå¿…é¡»æä¾›æ­¤æž„é€ å™¨å®žçŽ°ï¼Œä»Žè€Œä¹Ÿèƒ½ç¬¦åˆåè®®ã€‚

å…³äºŽ required æž„é€ å™¨çš„æ›´å¤šå†…å®¹ï¼Œè¯·å‚è€ƒå¿…è¦æž„é€ å™¨ã€‚

æ³¨æ„
å¦‚æžœç±»å·²ç»è¢«æ ‡è®°ä¸º finalï¼Œé‚£ä¹ˆä¸éœ€è¦åœ¨åè®®æž„é€ å™¨çš„å®žçŽ°ä¸­ä½¿ç”¨ required ä¿®é¥°ç¬¦ï¼Œå› ä¸º final ç±»ä¸èƒ½æœ‰å­ç±»ã€‚å…³äºŽ final ä¿®é¥°ç¬¦çš„æ›´å¤šå†…å®¹ï¼Œè¯·å‚è§é˜²æ­¢é‡å†™ã€‚

å¦‚æžœä¸€ä¸ªå­ç±»é‡å†™äº†çˆ¶ç±»çš„æŒ‡å®šæž„é€ å™¨ï¼Œå¹¶ä¸”è¯¥æž„é€ å™¨æ»¡è¶³äº†æŸä¸ªåè®®çš„è¦æ±‚ï¼Œé‚£ä¹ˆè¯¥æž„é€ å™¨çš„å®žçŽ°éœ€è¦åŒæ—¶æ ‡æ³¨ required å’Œ override ä¿®é¥°ç¬¦ï¼š

protocol SomeProtocol {
    init()
}

class SomeSuperClass {
    init() {
        // è¿™é‡Œæ˜¯æž„é€ å™¨çš„å®žçŽ°éƒ¨åˆ†
    }
}

class SomeSubClass: SomeSuperClass, SomeProtocol {
    // å› ä¸ºéµå¾ªåè®®ï¼Œéœ€è¦åŠ ä¸Š required
    // å› ä¸ºç»§æ‰¿è‡ªçˆ¶ç±»ï¼Œéœ€è¦åŠ ä¸Š override
    required override init() {
        // è¿™é‡Œæ˜¯æž„é€ å™¨çš„å®žçŽ°éƒ¨åˆ†
    }
}

ç±»ç±»åž‹ä¸“å±žåè®®
ä½ å¯ä»¥åœ¨åè®®çš„ç»§æ‰¿åˆ—è¡¨ä¸­ï¼Œé€šè¿‡æ·»åŠ  class å…³é”®å­—æ¥é™åˆ¶åè®®åªèƒ½è¢«ç±»ç±»åž‹éµå¾ªï¼Œè€Œç»“æž„ä½“æˆ–æžšä¸¾ä¸èƒ½éµå¾ªè¯¥åè®®ã€‚class å…³é”®å­—å¿…é¡»ç¬¬ä¸€ä¸ªå‡ºçŽ°åœ¨åè®®çš„ç»§æ‰¿åˆ—è¡¨ä¸­ï¼Œåœ¨å…¶ä»–ç»§æ‰¿çš„åè®®ä¹‹å‰ï¼š

protocol SomeClassOnlyProtocol: class, SomeInheritedProtocol {
    // è¿™é‡Œæ˜¯ç±»ç±»åž‹ä¸“å±žåè®®çš„å®šä¹‰éƒ¨åˆ†
}

å‰ç¼€å’ŒåŽç¼€è¿ç®—ç¬¦

ä¸Šä¸ªä¾‹å­æ¼”ç¤ºäº†ä¸€ä¸ªåŒç›®ä¸­ç¼€è¿ç®—ç¬¦çš„è‡ªå®šä¹‰å®žçŽ°ã€‚ç±»ä¸Žç»“æž„ä½“ä¹Ÿèƒ½æä¾›æ ‡å‡†å•ç›®è¿ç®—ç¬¦çš„å®žçŽ°ã€‚å•ç›®è¿ç®—ç¬¦åªè¿ç®—ä¸€ä¸ªå€¼ã€‚å½“è¿ç®—ç¬¦å‡ºçŽ°åœ¨å€¼ä¹‹å‰æ—¶ï¼Œå®ƒå°±æ˜¯å‰ç¼€çš„ï¼ˆä¾‹å¦‚ -aï¼‰ï¼Œè€Œå½“å®ƒå‡ºçŽ°åœ¨å€¼ä¹‹åŽæ—¶ï¼Œå®ƒå°±æ˜¯åŽç¼€çš„ï¼ˆä¾‹å¦‚ b!ï¼‰ã€‚

è¦å®žçŽ°å‰ç¼€æˆ–è€…åŽç¼€è¿ç®—ç¬¦ï¼Œéœ€è¦åœ¨å£°æ˜Žè¿ç®—ç¬¦å‡½æ•°çš„æ—¶å€™åœ¨ func å…³é”®å­—ä¹‹å‰æŒ‡å®š prefix æˆ–è€… postfix ä¿®é¥°ç¬¦ï¼š

extension Vector2D {
    static prefix func - (vector: Vector2D) -> Vector2D {
        return Vector2D(x: -vector.x, y: -vector.y)
    }
}

è‡ªå®šä¹‰ä¸­ç¼€è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§

æ¯ä¸ªè‡ªå®šä¹‰ä¸­ç¼€è¿ç®—ç¬¦éƒ½å±žäºŽæŸä¸ªä¼˜å…ˆçº§ç»„ã€‚è¿™ä¸ªä¼˜å…ˆçº§ç»„æŒ‡å®šäº†è¿™ä¸ªè¿ç®—ç¬¦å’Œå…¶ä»–ä¸­ç¼€è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å’Œç»“åˆæ€§ã€‚ä¼˜å…ˆçº§å’Œç»“åˆæ€§ä¸­è¯¦ç»†é˜è¿°äº†è¿™ä¸¤ä¸ªç‰¹æ€§æ˜¯å¦‚ä½•å¯¹ä¸­ç¼€è¿ç®—ç¬¦çš„è¿ç®—äº§ç”Ÿå½±å“çš„ã€‚

è€Œæ²¡æœ‰æ˜Žç¡®æ”¾å…¥ä¼˜å…ˆçº§ç»„çš„è‡ªå®šä¹‰ä¸­ç¼€è¿ç®—ç¬¦ä¼šæ”¾åˆ°ä¸€ä¸ªé»˜è®¤çš„ä¼˜å…ˆçº§ç»„å†…ï¼Œå…¶ä¼˜å…ˆçº§é«˜äºŽä¸‰å…ƒè¿ç®—ç¬¦ã€‚

ä»¥ä¸‹ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªæ–°çš„è‡ªå®šä¹‰ä¸­ç¼€è¿ç®—ç¬¦ +-ï¼Œæ­¤è¿ç®—ç¬¦å±žäºŽ AdditionPrecedence ä¼˜å…ˆç»„ï¼š

infix operator +-: AdditionPrecedence
extension Vector2D {
    static func +- (left: Vector2D, right: Vector2D) -> Vector2D {
        return Vector2D(x: left.x + right.x, y: left.y - right.y)
    }
}
let firstVector = Vector2D(x: 1.0, y: 2.0)
let secondVector = Vector2D(x: 3.0, y: 4.0)
let plusMinusVector = firstVector +- secondVector
// plusMinusVector æ˜¯ä¸€ä¸ª Vector2D å®žä¾‹ï¼Œå¹¶ä¸”å®ƒçš„å€¼ä¸º (4.0, -2.0)

è®¿é—®æŽ§åˆ¶
open public internal fileprivate private
